/*!
 * 
 * Copyright (C) 2019, Bitmovin, Inc., All Rights Reserved
 * 
 * This source code and its use and distribution, is subject to the terms
 * and conditions of the applicable license agreement.
 * 
 * bitmovin-analytics version v2.2.0-beta3
 * 
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.analytics=e():(t.bitmovin=t.bitmovin||{},t.bitmovin.analytics=e())}(window,function(){return function(t){var e={};function n(a){if(e[a])return e[a].exports;var s=e[a]={i:a,l:!1,exports:{}};return t[a].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/Users/tigraine/projects/analytics/collector/build/release",n(n.s=60)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t){void 0===t&&(t=!1),this.showLogs=t}return t.prototype.setLogging=function(t){this.showLogs=t},t.prototype.isLogging=function(){return this.showLogs},t.prototype.log=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.showLogs&&console.log.apply(console,[t].concat(e))},t.prototype.errorMessageToUser=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];console.error.apply(console,[t].concat(e))},t.prototype.error=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.showLogs&&console.error.apply(console,[t].concat(e))},t.prototype.warning=function(t){this.showLogs&&console.warn(t)},t}();e.padRight=function(t,e){return(t+new Array(e).join(" ")).slice(0,e)},e.logger=new a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(57);e.validString=function(t){return void 0!=t&&"string"==typeof t},e.validBoolean=function(t){return void 0!=t&&"boolean"==typeof t},e.validNumber=function(t){return void 0!=t&&"number"==typeof t},e.sanitizePath=function(t){return t.replace(/\/$/g,"")},e.calculateTimeWithUndefined=function(t){return void 0===t?t:(t*=1e3,Math.round(t))},e.calculateTime=function(t){return t*=1e3,Math.round(t)},e.getCurrentTimestamp=function(){return Date.now()},e.getDurationFromTimestampToNow=function(t){return e.getCurrentTimestamp()-t},e.generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},e.getCookie=function(t){for(var e=t+"=",n=0,a=document.cookie.split(";");n<a.length;n++){for(var s=a[n];" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(e))return s.substring(e.length,s.length)}return""},e.noOp=function(){},e.getCustomDataString=function(t){return"object"==typeof t?JSON.stringify(t):"function"==typeof t?e.getCustomDataString(t()):void 0===t?t:"string"!=typeof t?String(t):t},e.getDocumentPropWithPrefix=function(t){if(t in document)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0,a=["webkit","moz","ms","o"];n<a.length;n++){var s=a[n];if(s+e in document)return s+e}},e.isVideoInFullscreen=function(){var t=e.getDocumentPropWithPrefix("fullscreenElement");return void 0!==t&&document[t]&&"VIDEO"===document[t].nodeName},e.getHiddenProp=function(){return e.getDocumentPropWithPrefix("hidden")},e.getPageLoadType=function(){return!0===document[e.getHiddenProp()]?a.PAGE_LOAD_TYPE.BACKGROUND:a.PAGE_LOAD_TYPE.FOREGROUND},e.getHostnameAndPathFromUrl=function(t){var e=document.createElement("a");return e.href=t,{hostname:e.hostname,path:e.pathname}},e.calculatePercentage=function(t,e){if(void 0!==e&&0!==e)return Math.round((t||0)/e*100)},e.getBrowserInfo=function(){var t,e=navigator.userAgent,n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?{name:"IE",version:(t=/\brv[ :]+(\d+)/g.exec(e)||[])[1]||""}:"Chrome"===n[1]&&null!=(t=e.match(/\b(OPR|Edge)\/(\d+)/))?{name:t[1].replace("OPR","Opera"),version:t[2]}:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=e.match(/version\/(\d+)/i))&&n.splice(1,1,t[1]),{name:n[0],version:n[1]})},e.getURLResourceName=function(t){return 0===t.length?"":t.split("/").pop()||""},e.joinUrls=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(function(t,e){return(t.endsWith("/")&&void 0!==e?t.substr(0,t.length-1):t)+"/"+(e.startsWith("/")?e.substr(1):e)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.BITMOVIN="bitmovin",t.JW="jw",t.RADIANT="radiant",t.VIDEOJS="videojs",t.HLSJS="hlsjs",t.SHAKA="shaka",t.DASHJS="dashjs",t.HTML5="html5"}(e.Player||(e.Player={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.READY="ready",t.SOURCE_LOADED="sourceLoaded",t.PLAY="play",t.PLAYING="playing",t.PAUSE="pause",t.TIMECHANGED="timechanged",t.SEEK="seek",t.SEEKED="seeked",t.START_CAST="startCasting",t.END_CAST="endCasting",t.START_BUFFERING="startBuffering",t.END_BUFFERING="endBuffering",t.AUDIO_CHANGE="audioChange",t.VIDEO_CHANGE="videoChange",t.START_FULLSCREEN="startFullscreen",t.END_FULLSCREEN="endFullscreen",t.START_AD="adStart",t.END_AD="adEnd",t.MUTE="mute",t.UN_MUTE="unMute",t.ERROR="playerError",t.PLAYBACK_FINISHED="end",t.SCREEN_RESIZE="resize",t.UNLOAD="unload",t.END="end",t.METADATA_LOADED="metadataLoaded",t.SOURCE_UNLOADED="sourceUnloaded",t.MANUAL_SOURCE_CHANGE="manualSourceChangeInitiated"}(e.Event||(e.Event={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=function(){function t(){}return t.prototype.getCurrentImpressionId=function(){if(this.guardAgainstNotInitializedAnalytics())return this.analytics.getCurrentImpressionId()},t.prototype.setCustomData=function(t){this.guardAgainstNotInitializedAnalytics()&&this.analytics.setCustomData(t)},t.prototype.setCustomDataOnce=function(t){this.guardAgainstNotInitializedAnalytics()&&this.analytics.setCustomDataOnce(t)},t.prototype.sourceChange=function(t){this.guardAgainstNotInitializedAnalytics()&&this.analytics.sourceChange(t)},t.prototype.guardAgainstNotInitializedAnalytics=function(){return!!this.analytics||(a.logger.log("Bitmovin Analytics: Adapter hasn't been initialized yet"),!1)},t}();e.Adapter=s},function(t,e,n){"use strict";var a=this&&this.__assign||Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t};Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),i=n(0),r=n(7),o=n(56),E=n(15),l=n(45),c=function(){function t(t,e,n){var r=this;this.pageLoadTime=0,this.playerStartupTime=0,this.autoplay=void 0,this.optionalModuleReady=function(t){var e=t;if(e)new l.AdAnalytics(r,e);else i.logger.warning("Bitmovin Analytics: No AdAdapter available for this player type.")},this.setCustomDataOnce=function(t){var e=r.config;r.setCustomData(t),r.setCustomData(e)},this.guardAgainstMissingVideoTitle=function(t,e){t&&e&&t.title&&!e.title&&i.logger.error("The new analytics configuration does not contain the field title")},this.sourceChange=function(t){i.logger.log("Processing Source Change for Analytics",t),r.guardAgainstMissingVideoTitle(r.config,t);var e=a({},r.config,t);r.adapter.sourceChange(e,s.getCurrentTimestamp())},this.setCustomData=function(t){r.sendAnalyticsRequestAndClearValues(),r.config=a({},r.config,function(t){var e=t.customData1,n=t.customData2,a=t.customData3,s=t.customData4,i=t.customData5,r=t.experimentName,o={customData1:e,customData2:n,customData3:a,customData4:s,customData5:i,experimentName:r};return e&&(o.customData1=e),n&&(o.customData2=n),a&&(o.customData3=a),s&&(o.customData4=s),i&&(o.customData5=i),r&&(o.experimentName=r),o}(t)),r.setConfigParameters()},this.getCurrentImpressionId=function(){return r.sample.impressionId},this.setDroppedFrames=function(t){s.validNumber(t.droppedFrames)&&(r.sample.droppedFrames=0)},this.config=t,this.adapter=n,this.adapter.optionalModuleReady=this.optionalModuleReady,this.droppedSampleFrames=0,this.startupTime=0,this.sample=this.setupSample(),this.init(),this.setupStateMachineCallbacks(),this.adapter.initialize&&this.adapter.initialize()}return Object.defineProperty(t.prototype,"version",{get:function(){return E.VERSION},enumerable:!0,configurable:!0}),t.prototype.getPlayerInformationFromAdapter=function(){var t=this.config.player||this.adapter.getPlayerName();return{player:t,version:t+"-"+this.adapter.getPlayerVersion(),playerTech:this.adapter.getPlayerTech()}},t.prototype.updateSamplesToCastClientConfig=function(t,e){for(var n=0,a=t;n<a.length;n++){var s=a[n];this.updateSampleToCastClientConfig(s,e)}},t.prototype.updateSampleToCastClientConfig=function(t,e){var n=e.config,a=e.userId,s=e.impressionId,i=e.domain,r=e.path,o=e.language,E=e.userAgent;t.impressionId=s,t.userId=a,t.userAgent=E,t.domain=i,t.path=r,t.language=o,this.setConfigParameters(t,n)},t.prototype.init=function(){""!==this.config.key&&s.validString(this.config.key)?(i.logger.setLogging(this.config.debug||!1),this.backend=this.createBackend(this.config),this.setConfigParameters(),this.generateNewImpressionId(),this.setUserId()):console.error("Invalid analytics license key provided")},t.prototype.setConfigParameters=function(t,e){void 0===t&&(t=this.sample),void 0===e&&(e=this.config),t.key=e.key,t.playerKey=e.playerKey,e.player&&(t.player=e.player),t.cdnProvider=e.cdnProvider,t.videoId=e.videoId,t.videoTitle=e.title,t.customUserId=e.userId,t.customData1=s.getCustomDataString(e.customData1),t.customData2=s.getCustomDataString(e.customData2),t.customData3=s.getCustomDataString(e.customData3),t.customData4=s.getCustomDataString(e.customData4),t.customData5=s.getCustomDataString(e.customData5),t.experimentName=e.experimentName},t.prototype.generateNewImpressionId=function(){this.sample.impressionId=s.generateUUID()},t.prototype.setUserId=function(){var t=s.getCookie("bitmovin_analytics_uuid");t&&""!==t?this.sample.userId=t:(document.cookie="bitmovin_analytics_uuid="+s.generateUUID(),this.sample.userId=s.getCookie("bitmovin_analytics_uuid"))},t.prototype.setupStateMachineCallbacks=function(){var t=this;this.adapter.stateMachineCallbacks.setup=function(e,n,a){if(i.logger.log("Setup bitmovin analytics "+t.sample.analyticsVersion+" with impressionId: "+t.sample.impressionId),t.setDuration(e),t.setState(n),t.playerStartupTime=t.sample.playerStartupTime=e,window.performance&&window.performance.timing){var r=s.getCurrentTimestamp()-window.performance.timing.navigationStart;t.pageLoadTime=t.sample.pageLoadTime=r}t.startupTime=e,t.sendAnalyticsRequestAndClearValues(),t.sample.pageLoadTime=0},this.adapter.stateMachineCallbacks.startup=function(e,n){t.setDuration(e),t.sample.videoStartupTime=e,t.setState(n),t.startupTime>0&&(t.startupTime+=e),t.sample.startupTime=t.startupTime,t.autoplay=t.sample.autoplay=t.adapter.getAutoPlay();var a=t.adapter.drmPerformanceInfo;a.drmUsed&&(t.sample.drmType=a.drmInfo,t.sample.drmLoadTime=a.drmTime),t.sendAnalyticsRequestAndClearValues(),t.sample.autoplay=void 0},this.adapter.stateMachineCallbacks.playing=function(e,n,a){t.setDuration(e),t.setState(n),t.sample.played=e,t.setDroppedFrames(a),t.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.playingAndBye=function(e,n,a){t.setDuration(e),t.setState(n),t.sample.played=e,t.setDroppedFrames(a),t.sendUnloadRequest()},this.adapter.stateMachineCallbacks.heartbeat=function(e,n,a){t.setDroppedFrames(a),t.setState(n),t.setDuration(e),t.sample.played=t.sample.duration,t.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.qualitychange=function(e,n){t.setDuration(e),t.setState(n),t.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.qualitychange_pause=function(e,n){t.setDuration(e),t.setState(n),t.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.qualitychange_rebuffering=function(e,n){t.setDuration(e),t.setState(n),t.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.videoChange=function(e){t.adapter.stateMachineCallbacks.setVideoTimeEndFromEvent(e),t.adapter.stateMachineCallbacks.setVideoTimeStartFromEvent(e),t.setPlaybackVideoPropertiesFromEvent(e)},this.adapter.stateMachineCallbacks.audioChange=function(e){t.adapter.stateMachineCallbacks.setVideoTimeEndFromEvent(e),t.adapter.stateMachineCallbacks.setVideoTimeStartFromEvent(e),t.sample.audioBitrate=e.bitrate},this.adapter.stateMachineCallbacks.pause=function(e,n,a){t.setDuration(e),t.setState(n),t.sample.paused=e,t.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.paused_seeking=function(e,n,a){t.setDuration(e),t.setState(n),t.sample.seeked=e,t.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.end_play_seeking=function(e,n,a){t.setState(n),t.setDuration(e),t.sample.seeked=e,t.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.rebuffering=function(e,n,a){t.setDuration(e),t.setState(n),t.sample.buffered=e,t.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.error=function(e){t.adapter.stateMachineCallbacks.setVideoTimeEndFromEvent(e),t.adapter.stateMachineCallbacks.setVideoTimeStartFromEvent(e),t.setState("error"),t.sample.errorCode=e.code,t.sample.errorMessage=e.message;var n=t.adapter.segments.map(function(t){return t.name});t.sample.errorSegments=n,t.adapter.onError&&t.adapter.onError(),t.sendAnalyticsRequestAndClearValues(),delete t.sample.errorCode,delete t.sample.errorMessage},this.adapter.stateMachineCallbacks.ad=function(e,n,a){t.setDuration(e),t.setState(n),t.sample.ad=e,t.setDroppedFrames(a),t.sendAnalyticsRequestAndClearValues()},this.adapter.stateMachineCallbacks.mute=function(){t.sample.isMuted=!0},this.adapter.stateMachineCallbacks.unMute=function(){t.sample.isMuted=!1},this.adapter.stateMachineCallbacks.setVideoTimeEndFromEvent=function(e){s.validNumber(e.currentTime)&&(t.sample.videoTimeEnd=s.calculateTime(e.currentTime))},this.adapter.stateMachineCallbacks.setVideoTimeStartFromEvent=function(e){s.validNumber(e.currentTime)&&(t.sample.videoTimeStart=s.calculateTime(e.currentTime))},this.adapter.stateMachineCallbacks.manualSourceChange=function(e){t.sample=t.setupSample(),t.startupTime=0,t.init(),t.setConfigParameters(t.sample,e.config)},this.adapter.stateMachineCallbacks.end=function(e,n,a){t.sample=t.setupSample(),t.startupTime=0,t.init()}},t.prototype.setDuration=function(t){this.sample.duration=t},t.prototype.setState=function(t){this.sample.state=t},t.prototype.setPlaybackVideoPropertiesFromEvent=function(t){s.validNumber(t.width)&&(this.sample.videoPlaybackWidth=t.width),s.validNumber(t.height)&&(this.sample.videoPlaybackHeight=t.height),s.validNumber(t.bitrate)&&(this.sample.videoBitrate=t.bitrate)},t.prototype.setPlaybackInfoFromAdapter=function(){var t=this.adapter.getCurrentPlaybackInfo();t&&(s.validBoolean(t.isLive)&&(this.sample.isLive=t.isLive),s.validString(t.size)&&(this.sample.size=t.size),s.validString(t.playerTech)&&(this.sample.playerTech=t.playerTech),s.validNumber(t.videoDuration)&&(this.sample.videoDuration=s.calculateTime(t.videoDuration||0)),s.validString(t.streamFormat)&&(this.sample.streamFormat=t.streamFormat),s.validString(t.mpdUrl)&&(this.sample.mpdUrl=t.mpdUrl),s.validString(t.m3u8Url)&&(this.sample.m3u8Url=t.m3u8Url),s.validString(t.progUrl)&&(this.sample.progUrl=t.progUrl),s.validNumber(t.videoWindowWidth)&&(this.sample.videoWindowWidth=t.videoWindowWidth),s.validNumber(t.videoWindowHeight)&&(this.sample.videoWindowHeight=t.videoWindowHeight),s.validNumber(t.screenHeight)&&(this.sample.screenHeight=t.screenHeight),s.validNumber(t.screenWidth)&&(this.sample.screenWidth=t.screenWidth),s.validNumber(t.videoPlaybackHeight)&&(this.sample.videoPlaybackHeight=t.videoPlaybackHeight),s.validNumber(t.videoPlaybackWidth)&&(this.sample.videoPlaybackWidth=t.videoPlaybackWidth),s.validNumber(t.videoBitrate)&&(this.sample.videoBitrate=t.videoBitrate),s.validNumber(t.audioBitrate)&&(this.sample.audioBitrate=t.audioBitrate),s.validBoolean(t.isMuted)&&(this.sample.isMuted=t.isMuted),s.validBoolean(t.isCasting)&&(this.sample.isCasting=t.isCasting),s.validString(t.videoTitle)&&!this.config.title&&(this.sample.videoTitle=t.videoTitle))},t.prototype.setupSample=function(){return a({platform:"web",playerStartupTime:0,pageLoadType:s.getPageLoadType(),domain:s.sanitizePath(window.location.hostname),path:s.sanitizePath(window.location.pathname),language:navigator.language||navigator.userLanguage,userAgent:navigator.userAgent,screenWidth:screen.width,screenHeight:screen.height,isLive:!1,videoDuration:0,size:r.PlayerSize.Window,time:0,videoWindowWidth:0,videoWindowHeight:0,droppedFrames:0,played:0,buffered:0,paused:0,ad:0,seeked:0,videoPlaybackWidth:0,videoPlaybackHeight:0,videoBitrate:0,audioBitrate:0,videoTimeStart:0,videoTimeEnd:0,videoStartupTime:0,duration:0,startupTime:0,analyticsVersion:E.VERSION,pageLoadTime:0},this.getPlayerInformationFromAdapter())},t.prototype.sendAnalyticsRequest=function(){this.setPlaybackInfoFromAdapter(),this.sample.time=s.getCurrentTimestamp(),this.sample.downloadSpeedInfo=this.adapter.downloadSpeedInfo;var t=a({},this.sample);this.backend.sendRequest(t)},t.prototype.sendAnalyticsRequestAndClearValues=function(){this.sendAnalyticsRequest(),this.clearValues()},t.prototype.sendUnloadRequest=function(){this.backend.sendUnloadRequest(this.sample)},t.prototype.sendAnalyticsRequestSynchronous=function(){this.backend.sendRequestSynchronous(this.sample)},t.prototype.clearValues=function(){this.sample.ad=0,this.sample.paused=0,this.sample.played=0,this.sample.seeked=0,this.sample.buffered=0,this.sample.playerStartupTime=0,this.sample.videoStartupTime=0,this.sample.startupTime=0,this.sample.duration=0,this.sample.droppedFrames=0,this.sample.drmType=void 0,this.sample.drmLoadTime=void 0,this.adapter.clearValues()},t.prototype.getDroppedFrames=function(t){if(void 0!==t&&0!==t){var e=t-this.droppedSampleFrames;return this.droppedSampleFrames=t,e}return 0},t.prototype.createBackend=function(t){var e=s.sanitizePath(window.location.hostname);return o.BackendFactory.createBackend(t,{key:t.key,domain:e,version:E.VERSION})},t.version=E.VERSION,t.LICENSE_CALL_PENDING_TIMEOUT=200,t.PAGE_LOAD_TYPE_TIMEOUT=200,t.CAST_RECEIVER_CONFIG_MESSAGE="CAST_RECEIVER_CONFIG_MESSAGE",t}();e.Analytics=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a="video/mp4",s="video/webm",i="application/x-mpegURL",r="application/dash+xml";e.MIMETypes={MP4:a,WEBM:s,HLS:i,DASH:r},e.getMIMETypeFromFileExtension=function(t){return(t=t.toLowerCase()).endsWith(".m3u8")?i:t.endsWith(".mp4")||t.endsWith(".m4v")||t.endsWith(".m4a")?a:t.endsWith(".webm")?s:t.endsWith(".mpd")?r:void 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.Window="WINDOW",t.Fullscreen="FULLSCREEN"}(e.PlayerSize||(e.PlayerSize={}))},function(t,e,n){!function(){var n={VERSION:"2.4.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(t,e){var a="string"==typeof t.initial?{state:t.initial}:t.initial,s=t.terminal||t.final,i=e||t.target||{},r=t.events||[],o=t.callbacks||{},E={},l={},c=function(t){var e=Array.isArray(t.from)?t.from:t.from?[t.from]:[n.WILDCARD];E[t.name]=E[t.name]||{};for(var a=0;a<e.length;a++)l[e[a]]=l[e[a]]||[],l[e[a]].push(t.name),E[t.name][e[a]]=t.to||e[a];t.to&&(l[t.to]=l[t.to]||[])};a&&(a.event=a.event||"startup",c({name:a.event,from:"none",to:a.state}));for(var u=0;u<r.length;u++)c(r[u]);for(var d in E)E.hasOwnProperty(d)&&(i[d]=n.buildEvent(d,E[d]));for(var d in o)o.hasOwnProperty(d)&&(i[d]=o[d]);return i.current="none",i.is=function(t){return Array.isArray(t)?t.indexOf(this.current)>=0:this.current===t},i.can=function(t){return!this.transition&&void 0!==E[t]&&(E[t].hasOwnProperty(this.current)||E[t].hasOwnProperty(n.WILDCARD))},i.cannot=function(t){return!this.can(t)},i.transitions=function(){return(l[this.current]||[]).concat(l[n.WILDCARD]||[])},i.isFinished=function(){return this.is(s)},i.error=t.error||function(t,e,n,a,s,i,r){throw r||i},i.states=function(){return Object.keys(l).sort()},a&&!a.defer&&i[a.event](),i},doCallback:function(t,e,a,s,i,r){if(e)try{return e.apply(t,[a,s,i].concat(r))}catch(e){return t.error(a,s,i,r,n.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",e)}},beforeAnyEvent:function(t,e,a,s,i){return n.doCallback(t,t.onbeforeevent,e,a,s,i)},afterAnyEvent:function(t,e,a,s,i){return n.doCallback(t,t.onafterevent||t.onevent,e,a,s,i)},leaveAnyState:function(t,e,a,s,i){return n.doCallback(t,t.onleavestate,e,a,s,i)},enterAnyState:function(t,e,a,s,i){return n.doCallback(t,t.onenterstate||t.onstate,e,a,s,i)},changeState:function(t,e,a,s,i){return n.doCallback(t,t.onchangestate,e,a,s,i)},beforeThisEvent:function(t,e,a,s,i){return n.doCallback(t,t["onbefore"+e],e,a,s,i)},afterThisEvent:function(t,e,a,s,i){return n.doCallback(t,t["onafter"+e]||t["on"+e],e,a,s,i)},leaveThisState:function(t,e,a,s,i){return n.doCallback(t,t["onleave"+a],e,a,s,i)},enterThisState:function(t,e,a,s,i){return n.doCallback(t,t["onenter"+s]||t["on"+s],e,a,s,i)},beforeEvent:function(t,e,a,s,i){if(!1===n.beforeThisEvent(t,e,a,s,i)||!1===n.beforeAnyEvent(t,e,a,s,i))return!1},afterEvent:function(t,e,a,s,i){n.afterThisEvent(t,e,a,s,i),n.afterAnyEvent(t,e,a,s,i)},leaveState:function(t,e,a,s,i){var r=n.leaveThisState(t,e,a,s,i),o=n.leaveAnyState(t,e,a,s,i);return!1!==r&&!1!==o&&(n.ASYNC===r||n.ASYNC===o?n.ASYNC:void 0)},enterState:function(t,e,a,s,i){n.enterThisState(t,e,a,s,i),n.enterAnyState(t,e,a,s,i)},buildEvent:function(t,e){return function(){var a=this.current,s=e[a]||(e[n.WILDCARD]!=n.WILDCARD?e[n.WILDCARD]:a)||a,i=Array.prototype.slice.call(arguments);if(this.transition)return this.error(t,a,s,i,n.Error.PENDING_TRANSITION,"event "+t+" inappropriate because previous transition did not complete");if(this.cannot(t))return this.error(t,a,s,i,n.Error.INVALID_TRANSITION,"event "+t+" inappropriate in current state "+this.current);if(!1===n.beforeEvent(this,t,a,s,i))return n.Result.CANCELLED;if(a===s)return n.afterEvent(this,t,a,s,i),n.Result.NOTRANSITION;var r=this;this.transition=function(){return r.transition=null,r.current=s,n.enterState(r,t,a,s,i),n.changeState(r,t,a,s,i),n.afterEvent(r,t,a,s,i),n.Result.SUCCEEDED},this.transition.cancel=function(){r.transition=null,n.afterEvent(r,t,a,s,i)};var o=n.leaveState(this,t,a,s,i);return!1===o?(this.transition=null,n.Result.CANCELLED):n.ASYNC===o?n.Result.PENDING:this.transition?this.transition():void 0}}};void 0!==t&&t.exports&&(e=t.exports=n),e.StateMachine=n}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=n(0),i=function(){function t(t){var e=this;this.stateMachineCallbacks={setup:function(t,e,n){},startup:function(t,e){},updateSample:function(){},playing:function(t,e,n){},playingAndBye:function(t,e,n){},heartbeat:function(t,e,n){},qualitychange:function(t,e){},qualitychange_pause:function(t,e){},qualitychange_rebuffering:function(t,e){},videoChange:function(t){},audioChange:function(t){},pause:function(t,e,n){},paused_seeking:function(t,e,n){},end_play_seeking:function(t,e,n){},rebuffering:function(t,e,n){},error:function(t){},end:function(t,e,n){},ad:function(t,e,n){},mute:function(){},unMute:function(){},setVideoTimeEndFromEvent:function(t){},setVideoTimeStartFromEvent:function(t){},source_changing:function(t,e,n){},ready:function(t,e,n){},startCasting:function(t,e){},manualSourceChange:function(t){},muting_ready:function(t,e,n){}},this.eventCallback=function(t,n){n=n||{},e.stateMachine?e.stateMachine.callEvent(t,n,a.getCurrentTimestamp()):s.logger.log("Bitmovin Analytics: StateMachine isn't ready yet")},this.optionalModuleReady=function(t){},t||(t={starttime:void 0}),t.starttime||(t.starttime=a.getCurrentTimestamp()),this.opts=t}return t.prototype.getCommonPlaybackInfo=function(){return{screenHeight:screen.height,screenWidth:screen.width}},t.prototype.clearValues=function(){},t.prototype.clearSegments=function(){},Object.defineProperty(t.prototype,"downloadSpeedInfo",{get:function(){return{segmentsDownloadCount:0,segmentsDownloadSize:0,segmentsDownloadTime:0,avgDownloadSpeed:0,minDownloadSpeed:0,maxDownloadSpeed:0,avgTimeToFirstByte:0}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"segments",{get:function(){return[]},enumerable:!0,configurable:!0}),t}();e.InternalAdapter=i},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),s=this&&this.__assign||Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t};Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),r=n(39),o=n(2),E=n(3),l=n(13),c=n(6),u=n(7),d=n(1),h=function(t){function e(e,n){var a=t.call(this,n)||this;return a.mediaElement=e,a._drmPerformanceInfo={drmUsed:!1},a.getPlayerName=function(){return o.Player.HTML5},a.getPlayerTech=function(){return"html5"},a.getAutoPlay=function(){return!!a.mediaElement&&a.mediaElement.autoplay},a.isLive=function(){return!!a.mediaElement&&a.mediaElement.duration===1/0},a.stateMachine=new r.HTML5AnalyticsStateMachine(a.stateMachineCallbacks,a.opts),a.mediaElEventHandlers=[],a.analyticsBitrate=-1,a.bufferingTimeout=void 0,a.isBuffering=!1,a.lastIsLiveStatus=!1,a.isPaused=!1,a.previousMediaTime=0,a.needsReadyEvent=!0,a.needsFirstPlayIntent=!0,a.mediaElementSet=!1,a}return a(e,t),Object.defineProperty(e.prototype,"drmPerformanceInfo",{get:function(){return this._drmPerformanceInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segments",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){this.mediaElement&&this.setMediaElement()},e.prototype.getStreamSources=function(t){if(!t)return{};switch(this.getStreamType()){case"hls":return{m3u8Url:t};case"dash":return{mpdUrl:t};default:return{progUrl:t}}},e.prototype.getCurrentPlaybackInfo=function(){var t=s({},this.getCommonPlaybackInfo(),this.getStreamSources(this.getStreamURL()),{streamFormat:this.getStreamType(),isLive:this.isLive(),size:d.isVideoInFullscreen()?u.PlayerSize.Fullscreen:u.PlayerSize.Window,playerTech:this.getPlayerTech()});this.mediaElement&&(t=s({},t,{videoDuration:this.mediaElement.duration,isMuted:this.mediaElement.muted,videoWindowHeight:this.mediaElement.height,videoWindowWidth:this.mediaElement.width}));var e=this.getCurrentQualityLevelInfo();return e&&(t=s({},t,{videoPlaybackHeight:e.height,videoPlaybackWidth:e.width,videoBitrate:e.bitrate})),t},e.prototype.setMediaElement=function(t){if(void 0===t&&(t=null),t&&this.mediaElement&&(this.unregisterMediaElement(),this.mediaElementSet=!1),t&&(this.mediaElement=t),!this.mediaElement)throw new Error("No media element owned");if(this.mediaElementSet)throw new Error("Media element already set (only call this once)");this.mediaElementSet=!0,this.registerMediaElement(),this.onMaybeReady()},e.prototype.getMIMEType=function(){var t=this.getStreamURL();if(t&&void 0!==t)return c.getMIMETypeFromFileExtension(t)},e.prototype.getStreamType=function(){var t=this.getMIMEType();if(t)return l.getStreamTypeFromMIMEType(t)},e.prototype.getStreamURL=function(){var t=this.mediaElement;if(t)return t.src},e.prototype.resetMedia=function(){this.mediaElement=null,this.mediaElEventHandlers=[],window.clearTimeout(this.bufferingTimeout)},e.prototype.registerMediaElement=function(){var t=this,e=this.mediaElement;e&&(this.listenToMediaElementEvent("loadedmetadata",function(){1===e.readyState&&(t.checkQualityLevelAttributes(!0),t.eventCallback(E.Event.METADATA_LOADED,null))}),this.listenToMediaElementEvent("play",function(){var n=e.currentTime;t.needsFirstPlayIntent=!1,t.eventCallback(E.Event.PLAY,{currentTime:n})}),this.listenToMediaElementEvent("pause",function(){t.onPaused()}),this.listenToMediaElementEvent("playing",function(){var n=e.currentTime;t.isPaused=!1,t.needsFirstPlayIntent||t.eventCallback(E.Event.TIMECHANGED,{currentTime:n})}),this.listenToMediaElementEvent("error",function(){var n=e.currentTime,a=e.error;t.eventCallback(E.Event.ERROR,{currentTime:n,code:a?a.code:null,message:a?a.message:null})}),this.listenToMediaElementEvent("volumechange",function(){var n=e.muted,a=e.currentTime;n?t.eventCallback(E.Event.MUTE,{currentTime:a}):t.eventCallback(E.Event.UN_MUTE,{currentTime:a})}),this.listenToMediaElementEvent("seeking",function(){var n=e.currentTime;t.eventCallback(E.Event.SEEK,{currentTime:n,droppedFrames:0})}),this.listenToMediaElementEvent("seeked",function(){var n=e.currentTime;clearTimeout(t.bufferingTimeout),t.eventCallback(E.Event.SEEKED,{currentTime:n,droppedFrames:0})}),this.listenToMediaElementEvent("timeupdate",function(){var n=e.currentTime;t.isBuffering=!1,t.needsFirstPlayIntent||(t.isPaused||t.eventCallback(E.Event.TIMECHANGED,{currentTime:n}),t.checkQualityLevelAttributes(),t.checkPlayheadProgress(),t.previousMediaTime=n)}),this.listenToMediaElementEvent("stalled",function(){}),this.listenToMediaElementEvent("waiting",function(){t.onBuffering()}))},e.prototype.listenToMediaElementEvent=function(t,e){if(!this.mediaElement)throw new Error("No media attached");var n=e.bind(this);this.mediaElEventHandlers.push({event:t,handler:n}),this.mediaElement.addEventListener(t,n,!1)},e.prototype.onMaybeReady=function(){if(this.needsReadyEvent&&this.mediaElement){this.needsReadyEvent=!1;var t=this.getCurrentPlaybackInfo();this.stateMachine.updateMetadata(),this.eventCallback(E.Event.READY,t)}},e.prototype.unregisterMediaElement=function(){if(!this.mediaElement)throw new Error("No media attached");var t=this.mediaElement;this.mediaElEventHandlers.forEach(function(e){t.removeEventListener(e.event,e.handler)}),this.resetMedia()},e.prototype.onBuffering=function(){if(!this.mediaElement)throw new Error("No media attached");var t=this.mediaElement.currentTime;this.isBuffering||this.isPaused||(this.eventCallback(E.Event.START_BUFFERING,{currentTime:t}),this.isBuffering=!0)},e.prototype.onPaused=function(){if(!this.isPaused){if(!this.mediaElement)throw new Error("No media attached");var t=this.mediaElement.currentTime;this.eventCallback(E.Event.PAUSE,{currentTime:t}),this.isPaused=!0}},e.prototype.checkPlayheadProgress=function(){var t=this;if(!this.mediaElement)throw new Error("No media attached");var n=this.mediaElement;n.paused&&this.onPaused(),clearTimeout(this.bufferingTimeout),this.bufferingTimeout=window.setTimeout(function(){n.paused||n.ended&&!t.isBuffering||n.currentTime-t.previousMediaTime<e.BUFFERING_TIMECHANGED_TIMEOUT&&t.onBuffering()},e.BUFFERING_TIMECHANGED_TIMEOUT)},e.prototype.checkQualityLevelAttributes=function(t){if(void 0===t&&(t=!1),!this.mediaElement)throw new Error("No media attached");var e=this.mediaElement,n=this.getCurrentQualityLevelInfo();if(n){var a=n.bitrate,s=n.width,i=n.height,r=this.isLive();if(r!==this.lastIsLiveStatus&&(this.lastIsLiveStatus=r,t||this.stateMachine.updateMetadata()),this.analyticsBitrate!==a){var o={width:s,height:i,bitrate:a,currentTime:e.currentTime};t||this.eventCallback(E.Event.VIDEO_CHANGE,o),this.analyticsBitrate=a}}},e.prototype.sourceChange=function(t,e){this.stateMachine.sourceChange(t,e,this.mediaElement?this.mediaElement.currentTime:void 0)},e.BUFFERING_TIMECHANGED_TIMEOUT=1e3,e}(i.InternalAdapter);e.HTML5InternalAdapter=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSourceInfoFromBitmovinSourceConfig=function(t,e){if(!t)return{progBitrate:void 0,progUrl:void 0};if("string"==typeof t)return{progBitrate:0,progUrl:t};if(Array.isArray(t)){var n=+e.getPlaybackVideoData().id;return isNaN(n)&&(n=0),{progBitrate:t[n].bitrate||0,progUrl:t[n].url}}return"object"==typeof t?{progBitrate:t.bitrate||0,progUrl:t.url}:{progBitrate:void 0,progUrl:void 0}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){return function(t,e,n,a,s){this.event=t,this.from=e,this.to=n,this.timestamp=a,this.eventObject=s}}();e.EventDebugging=a},function(t,e,n){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0});var s=n(6),i=s.MIMETypes.MP4,r=s.MIMETypes.WEBM,o=s.MIMETypes.HLS,E=s.MIMETypes.DASH,l=((a={})[i]="progressive",a[r]="progressive",a[o]="hls",a[E]="dash",a);e.getStreamTypeFromMIMEType=function(t){return l[t]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.post=function(t,e,n,a){var s;void 0===a&&(a=!0);var i=!1;window.XDomainRequest&&(i=!0),s=i?new window.XDomainRequest:new XMLHttpRequest;var r=function(){if(s.readyState==XMLHttpRequest.DONE){if(s.responseText<=0)return;var t=JSON.parse(s.responseText);n(t)}};i?s.onload=r:s.onreadystatechange=r,s.open("POST",t,a),i||s.setRequestHeader("Content-Type","text/plain"),s.send(JSON.stringify(e))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION="v2.2.0-beta3"},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(10),i=n(2),r=n(1),o=function(t){function e(e,n){var a=t.call(this,e,n)||this;return a.getPlayerName=function(){return i.Player.HTML5},a.getPlayerVersion=function(){var t=r.getBrowserInfo();return t.name+" "+t.version},a}return a(e,t),e.prototype.getStreamURL=function(){return this.mediaElement?this.mediaElement.currentSrc:void 0},e.prototype.getCurrentQualityLevelInfo=function(){return{bitrate:void 0,width:this.mediaElement?this.mediaElement.videoWidth:void 0,height:this.mediaElement?this.mediaElement.videoHeight:void 0}},e}(s.HTML5InternalAdapter);e.HTMLVideoElementInternalAdapter=o},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(5),i=n(4),r=n(16),o=function(t){function e(e,n,a){var i=t.call(this)||this;return i.internalAdapter=new r.HTMLVideoElementInternalAdapter(n,a),i.analytics=new s.Analytics(e,n,i.internalAdapter),i}return a(e,t),e}(i.Adapter);e.HTMLVideoElementAdapter=o},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(10),i=n(2),r=n(6),o=function(t){function e(e,n){var a=t.call(this,null,n)||this;return a.mediaPlayer=e,a.onBeforeUnLoadEvent=!1,a.getPlayerName=function(){return i.Player.DASHJS},a.getPlayerVersion=function(){return a.mediaPlayer.getVersion()},a}return a(e,t),e.prototype.initialize=function(){var t=this,e=null,n=!1;try{e=this.mediaPlayer.getVideoElement()}catch(t){}e?this.setMediaElement(e):this.mediaPlayer.on("canPlay",function(){n||(e=t.mediaPlayer.getVideoElement(),n=!0,t.setMediaElement(e))},this)},e.prototype.getMIMEType=function(){return r.MIMETypes.DASH},e.prototype.getStreamURL=function(){if(this.mediaPlayer){var t=this.mediaPlayer.getSource();return t?t.toString():void 0}},e.prototype.getCurrentQualityLevelInfo=function(){if(this.mediaPlayer){var t=this.mediaPlayer.getBitrateInfoListFor("video")[this.mediaPlayer.getQualityFor("video")];return{width:t.width,height:t.height,bitrate:t.bitrate}}return null},e}(s.HTML5InternalAdapter);e.DashjsInternalAdapter=o},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(5),i=n(18),r=function(t){function e(e,n,a){var r=t.call(this)||this;return r.internalAdapter=new i.DashjsInternalAdapter(n,a),r.analytics=new s.Analytics(e,n,r.internalAdapter),r}return a(e,t),e}(n(4).Adapter);e.DashjsAdapter=r},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(10),i=n(2),r=n(6),o=function(t){function e(e,n){var a=t.call(this,e.getMediaElement(),n)||this;return a.player=e,a.getPlayerName=function(){return i.Player.SHAKA},a.getPlayerVersion=function(){return a.player.constructor.version},a.isLive=function(){return!!a.player&&a.player.isLive()},a}return a(e,t),e.prototype.getMIMEType=function(){return r.MIMETypes.DASH},e.prototype.getStreamURL=function(){return this.player?this.player.getManifestUri():null},e.prototype.getCurrentQualityLevelInfo=function(){var t=this.player.getVariantTracks().filter(function(t){return t.active}).filter(function(t){return t.videoCodec||void 0!==t.videoId})[0];return t?{bitrate:t.videoBandwidth||t.bandwidth,width:t.width,height:t.height}:null},e}(s.HTML5InternalAdapter);e.ShakaInternalAdapter=o},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(5),i=n(4),r=n(20),o=function(t){function e(e,n,a){var i=t.call(this)||this;return i.internalAdapter=new r.ShakaInternalAdapter(n,a),i.analytics=new s.Analytics(e,n,i.internalAdapter),i}return a(e,t),e}(i.Adapter);e.ShakaAdapter=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(0),i=n(0),r=n(8),o=n(3);!function(t){t.SETUP="SETUP",t.STARTUP="STARTUP",t.READY="READY",t.PLAYING="PLAYING",t.REBUFFERING="REBUFFERING",t.PAUSE="PAUSE",t.QUALITYCHANGE="QUALITYCHANGE",t.PAUSED_SEEKING="PAUSED_SEEKING",t.PLAY_SEEKING="PLAY_SEEKING",t.END_PLAY_SEEKING="END_PLAY_SEEKING",t.QUALITYCHANGE_PAUSE="QUALITYCHANGE_PAUSE",t.QUALITYCHANGE_REBUFFERING="QUALITYCHANGE_REBUFFERING",t.END="END",t.ERROR="ERROR",t.MUTING_READY="MUTING_READY",t.MUTING_PLAY="MUTING_PLAY",t.MUTING_PAUSE="MUTING_PAUSE",t.CASTING="CASTING"}(a||(a={}));var E=function(){function t(t,e){var n=this;this.sourceChange=function(t,e,a){n.callEvent(o.Event.MANUAL_SOURCE_CHANGE,{config:t,currentTime:a},e)},this.stateMachineCallbacks=t,this.seekTimestamp=0,this.seekedTimestamp=0,this.seekedTimeout=0,this.onEnterStateTimestamp=0,this.states=a,this.createStateMachine(e)}return t.prototype.getAllStates=function(){var t=this;return Object.keys(this.states).map(function(e){return t.states[e]}).concat(["FINISH_PLAY_SEEKING","PLAY_SEEK","FINISH_QUALITYCHANGE_PAUSE","FINISH_QUALITYCHANGE","FINISH_QUALITYCHANGE_REBUFFERING"])},t.prototype.createStateMachine=function(t){var e=this;this.stateMachine=r.create({initial:this.states.SETUP,error:function(t,e,n,a,i,r){s.logger.error("Error in statemachine: "+r)},events:[{name:o.Event.TIMECHANGED,from:this.states.SETUP,to:this.states.SETUP},{name:o.Event.READY,from:[this.states.SETUP,this.states.ERROR],to:this.states.READY},{name:o.Event.PLAY,from:this.states.READY,to:this.states.STARTUP},{name:o.Event.START_BUFFERING,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.END_BUFFERING,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.VIDEO_CHANGE,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.AUDIO_CHANGE,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.TIMECHANGED,from:this.states.STARTUP,to:this.states.PLAYING},{name:o.Event.TIMECHANGED,from:this.states.PLAYING,to:this.states.PLAYING},{name:o.Event.END_BUFFERING,from:this.states.PLAYING,to:this.states.PLAYING},{name:o.Event.START_BUFFERING,from:this.states.PLAYING,to:this.states.REBUFFERING},{name:o.Event.START_BUFFERING,from:this.states.REBUFFERING,to:this.states.REBUFFERING},{name:o.Event.TIMECHANGED,from:this.states.REBUFFERING,to:this.states.PLAYING},{name:o.Event.SEEK,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.SEEK,from:this.states.PLAYING,to:this.states.PLAY_SEEKING},{name:o.Event.TIMECHANGED,from:this.states.PLAY_SEEKING,to:this.states.PLAY_SEEKING},{name:o.Event.TIMECHANGED,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.PAUSE,from:this.states.PLAYING,to:this.states.PAUSE},{name:o.Event.PAUSE,from:this.states.REBUFFERING,to:this.states.PAUSE},{name:o.Event.TIMECHANGED,from:this.states.PAUSE,to:this.states.PAUSE},{name:o.Event.PLAY,from:this.states.PAUSE,to:this.states.PLAYING},{name:o.Event.VIDEO_CHANGE,from:this.states.PLAYING,to:this.states.QUALITYCHANGE},{name:o.Event.AUDIO_CHANGE,from:this.states.PLAYING,to:this.states.QUALITYCHANGE},{name:o.Event.VIDEO_CHANGE,from:this.states.QUALITYCHANGE,to:this.states.QUALITYCHANGE},{name:o.Event.AUDIO_CHANGE,from:this.states.QUALITYCHANGE,to:this.states.QUALITYCHANGE},{name:"FINISH_QUALITYCHANGE",from:this.states.QUALITYCHANGE,to:this.states.PLAYING},{name:o.Event.VIDEO_CHANGE,from:this.states.PAUSE,to:this.states.QUALITYCHANGE_PAUSE},{name:o.Event.AUDIO_CHANGE,from:this.states.PAUSE,to:this.states.QUALITYCHANGE_PAUSE},{name:o.Event.VIDEO_CHANGE,from:this.states.QUALITYCHANGE_PAUSE,to:this.states.QUALITYCHANGE_PAUSE},{name:o.Event.AUDIO_CHANGE,from:this.states.QUALITYCHANGE_PAUSE,to:this.states.QUALITYCHANGE_PAUSE},{name:"FINISH_QUALITYCHANGE_PAUSE",from:this.states.QUALITYCHANGE_PAUSE,to:this.states.PAUSE},{name:o.Event.SEEK,from:this.states.PAUSE,to:this.states.PAUSED_SEEKING},{name:o.Event.SEEK,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.AUDIO_CHANGE,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.VIDEO_CHANGE,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.START_BUFFERING,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.END_BUFFERING,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.SEEKED,from:this.states.PAUSED_SEEKING,to:this.states.PAUSE},{name:o.Event.PLAY,from:this.states.PAUSED_SEEKING,to:this.states.PLAYING},{name:o.Event.PAUSE,from:this.states.PAUSED_SEEKING,to:this.states.PAUSE},{name:"PLAY_SEEK",from:this.states.PAUSE,to:this.states.PLAY_SEEKING},{name:"PLAY_SEEK",from:this.states.PAUSED_SEEKING,to:this.states.PLAY_SEEKING},{name:"PLAY_SEEK",from:this.states.PLAY_SEEKING,to:this.states.PLAY_SEEKING},{name:o.Event.SEEK,from:this.states.PLAY_SEEKING,to:this.states.PLAY_SEEKING},{name:o.Event.AUDIO_CHANGE,from:this.states.PLAY_SEEKING,to:this.states.PLAY_SEEKING},{name:o.Event.VIDEO_CHANGE,from:this.states.PLAY_SEEKING,to:this.states.PLAY_SEEKING},{name:o.Event.START_BUFFERING,from:this.states.PLAY_SEEKING,to:this.states.PLAY_SEEKING},{name:o.Event.END_BUFFERING,from:this.states.PLAY_SEEKING,to:this.states.PLAY_SEEKING},{name:o.Event.SEEKED,from:this.states.PLAY_SEEKING,to:this.states.PLAY_SEEKING},{name:o.Event.SEEKED,from:this.states.PLAY_SEEKING,to:this.states.END_PLAY_SEEKING},{name:o.Event.START_BUFFERING,from:this.states.END_PLAY_SEEKING,to:this.states.END_PLAY_SEEKING},{name:o.Event.END_BUFFERING,from:this.states.END_PLAY_SEEKING,to:this.states.END_PLAY_SEEKING},{name:o.Event.SEEKED,from:this.states.END_PLAY_SEEKING,to:this.states.END_PLAY_SEEKING},{name:o.Event.TIMECHANGED,from:this.states.END_PLAY_SEEKING,to:this.states.PLAYING},{name:o.Event.END,from:this.states.PLAY_SEEKING,to:this.states.END},{name:o.Event.END,from:this.states.PAUSED_SEEKING,to:this.states.END},{name:o.Event.END,from:this.states.PLAYING,to:this.states.END},{name:o.Event.END,from:this.states.PAUSE,to:this.states.END},{name:o.Event.SEEK,from:this.states.END,to:this.states.END},{name:o.Event.SEEKED,from:this.states.END,to:this.states.END},{name:o.Event.TIMECHANGED,from:this.states.END,to:this.states.END},{name:o.Event.END_BUFFERING,from:this.states.END,to:this.states.END},{name:o.Event.START_BUFFERING,from:this.states.END,to:this.states.END},{name:o.Event.END,from:this.states.END,to:this.states.END},{name:o.Event.SEEKED,from:this.states.PLAYING,to:this.states.PLAYING},{name:o.Event.PLAY,from:this.states.END,to:this.states.PLAYING},{name:o.Event.ERROR,from:this.getAllStates(),to:this.states.ERROR},{name:o.Event.PAUSE,from:this.states.ERROR,to:this.states.ERROR},{name:o.Event.SEEK,from:this.states.END_PLAY_SEEKING,to:this.states.PLAY_SEEKING},{name:"FINISH_PLAY_SEEKING",from:this.states.END_PLAY_SEEKING,to:this.states.PLAYING},{name:o.Event.UNLOAD,from:this.getAllStates(),to:this.states.END},{name:o.Event.START_AD,from:this.states.PLAYING,to:this.states.AD},{name:o.Event.END_AD,from:this.states.AD,to:this.states.PLAYING},{name:o.Event.MUTE,from:this.states.READY,to:this.states.MUTING_READY},{name:o.Event.UN_MUTE,from:this.states.READY,to:this.states.MUTING_READY},{name:"FINISH_MUTING",from:this.states.MUTING_READY,to:this.states.READY},{name:o.Event.MUTE,from:this.states.PLAYING,to:this.states.MUTING_PLAY},{name:o.Event.UN_MUTE,from:this.states.PLAYING,to:this.states.MUTING_PLAY},{name:"FINISH_MUTING",from:this.states.MUTING_PLAY,to:this.states.PLAYING},{name:o.Event.MUTE,from:this.states.PAUSE,to:this.states.MUTING_PAUSE},{name:o.Event.UN_MUTE,from:this.states.PAUSE,to:this.states.MUTING_PAUSE},{name:"FINISH_MUTING",from:this.states.MUTING_PAUSE,to:this.states.PAUSE},{name:o.Event.START_CAST,from:[this.states.READY,this.states.PAUSE],to:this.states.CASTING},{name:o.Event.PAUSE,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.PLAY,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.TIMECHANGED,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.MUTE,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.SEEK,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.SEEKED,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.END_CAST,from:this.states.CASTING,to:this.states.READY},{name:o.Event.SEEK,from:this.states.READY,to:this.states.READY},{name:o.Event.SEEKED,from:this.states.READY,to:this.states.READY},{name:o.Event.SEEKED,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.SOURCE_LOADED,from:this.getAllStates(),to:this.states.SETUP},{name:o.Event.VIDEO_CHANGE,from:this.states.REBUFFERING,to:this.states.QUALITYCHANGE_REBUFFERING},{name:o.Event.AUDIO_CHANGE,from:this.states.REBUFFERING,to:this.states.QUALITYCHANGE_REBUFFERING},{name:o.Event.VIDEO_CHANGE,from:this.states.QUALITYCHANGE_REBUFFERING,to:this.states.QUALITYCHANGE_REBUFFERING},{name:o.Event.AUDIO_CHANGE,from:this.states.QUALITYCHANGE_REBUFFERING,to:this.states.QUALITYCHANGE_REBUFFERING},{name:"FINISH_QUALITYCHANGE_REBUFFERING",from:this.states.QUALITYCHANGE_REBUFFERING,to:this.states.REBUFFERING}],callbacks:{onenterstate:function(n,a,r,E,l){"none"===a&&t.starttime?e.onEnterStateTimestamp=t.starttime:e.onEnterStateTimestamp=E||(new Date).getTime(),s.logger.log("[ENTER] "+i.padRight(r,20)+"EVENT: "+i.padRight(n,20)+" from "+i.padRight(a,14)),l&&r!==e.states.PAUSED_SEEKING&&r!==e.states.PLAY_SEEKING&&r!==e.states.END_PLAY_SEEKING&&e.stateMachineCallbacks.setVideoTimeStartFromEvent(l),"PLAY_SEEK"===n&&r===e.states.PLAY_SEEKING&&r!==e.states.PLAY_SEEKING&&r!==e.states.END_PLAY_SEEKING&&(e.seekTimestamp=e.onEnterStateTimestamp),n===o.Event.START_CAST&&r===e.states.CASTING&&e.stateMachineCallbacks.startCasting(E,l)},onafterevent:function(t,n,a,s){a===e.states.QUALITYCHANGE&&e.stateMachine.FINISH_QUALITYCHANGE(s),a!==e.states.MUTING_READY&&a!==e.states.MUTING_PLAY&&a!==e.states.MUTING_PAUSE||e.stateMachine.FINISH_MUTING(s)},onleavestate:function(t,n,a,i,r){if(i){var E=i-e.onEnterStateTimestamp;if(r&&a!==e.states.PAUSED_SEEKING&&a!==e.states.PLAY_SEEKING&&a!==e.states.END_PLAY_SEEKING&&e.stateMachineCallbacks.setVideoTimeEndFromEvent(r),"PLAY_SEEK"===t&&n===e.states.PAUSE)return!0;var l=String(n).toLowerCase();if(n===e.states.END_PLAY_SEEKING||n===e.states.PAUSED_SEEKING){var c=e.seekedTimestamp-e.seekTimestamp;e.stateMachineCallbacks[l](c,l,r)}else if(t===o.Event.UNLOAD&&n===e.states.PLAYING)e.stateMachineCallbacks.playingAndBye(E,l,r);else if(n===e.states.PAUSE&&a!==e.states.PAUSED_SEEKING)e.stateMachineCallbacks.setVideoTimeStartFromEvent(t),e.stateMachineCallbacks.pause(E,l,r);else{var u=e.stateMachineCallbacks[l];"function"==typeof u?u(E,l,r):s.logger.error("Could not find callback function for "+l)}r&&a!==e.states.PAUSED_SEEKING&&a!==e.states.PLAY_SEEKING&&a!==e.states.END_PLAY_SEEKING&&e.stateMachineCallbacks.setVideoTimeStartFromEvent(r),t===o.Event.VIDEO_CHANGE?e.stateMachineCallbacks.videoChange(r):t===o.Event.AUDIO_CHANGE?e.stateMachineCallbacks.audioChange(r):t===o.Event.MUTE?e.stateMachineCallbacks.mute():t===o.Event.UN_MUTE&&e.stateMachineCallbacks.unMute()}},onseek:function(t,n,a,s){e.seekTimestamp=s},onseeked:function(t,n,a,s){e.seekedTimestamp=s},ontimechanged:function(t,n,a,s,i){var r=s-e.onEnterStateTimestamp;r>59700&&(e.stateMachineCallbacks.setVideoTimeEndFromEvent(i),e.stateMachineCallbacks.heartbeat(r,String(n).toLowerCase(),i),e.onEnterStateTimestamp=s,e.stateMachineCallbacks.setVideoTimeStartFromEvent(i))},onplayerError:function(t,n,a,s,i){e.stateMachineCallbacks.error(i)}}})},t.prototype.callEvent=function(t,e,n){var a=this.stateMachine[t];a?a.call(this.stateMachine,n,e):s.logger.log("Ignored Event: "+t)},t.prototype.updateMetadata=function(){this.stateMachineCallbacks.updateSample()},t}();e.VideojsAnalyticsStateMachine=E},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),s=this&&this.__assign||Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t};Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),r=n(22),o=n(2),E=n(3),l=n(6),c=n(13),u=n(7),d=function(t){function e(e,n){var a=t.call(this,n)||this;return a.player=e,a._drmPerformanceInfo={drmUsed:!1},a.onBeforeUnLoadEvent=!1,a.getPlayerVersion=function(){return window.videojs?window.videojs.VERSION:"unknown"},a.getPlayerName=function(){return o.Player.VIDEOJS},a.getPlayerTech=function(){return"html5"},a.getAutoPlay=function(){return 1==a.player.autoplay()},a.stateMachine=new r.VideojsAnalyticsStateMachine(a.stateMachineCallbacks,a.opts),a.register(),a}return a(e,t),Object.defineProperty(e.prototype,"drmPerformanceInfo",{get:function(){return this._drmPerformanceInfo},enumerable:!0,configurable:!0}),e.prototype.getStreamType=function(t){var e=l.getMIMETypeFromFileExtension(t);if(e)return c.getStreamTypeFromMIMEType(e)},e.prototype.getStreamSources=function(t){switch(this.getStreamType(t)){case"hls":return{m3u8Url:t};case"dash":return{mpdUrl:t};default:return{progUrl:t}}},e.prototype.getCurrentPlaybackInfo=function(){var t=s({},this.getCommonPlaybackInfo(),this.getStreamSources(this.player.currentSrc()),{streamFormat:this.getStreamType(this.player.currentSrc()),isLive:this.player.duration()===1/0,size:this.player.isFullscreen()?u.PlayerSize.Fullscreen:u.PlayerSize.Window,playerTech:this.getPlayerTech(),isMuted:this.player.muted(),videoDuration:this.player.duration(),videoWindowHeight:this.player.height(),videoWindowWidth:this.player.width(),videoPlaybackHeight:this.player.videoHeight(),videoPlaybackWidth:this.player.videoWidth()}),e=this.getCurrentQualityLevelInfo();return e&&(t.videoPlaybackWidth=e.width||t.videoPlaybackWidth,t.videoPlaybackWidth=e.height||t.videoPlaybackHeight,t.videoBitrate=e.bitrate),t},e.prototype.getCurrentQualityLevelInfo=function(){return null},e.prototype.register=function(){var t,n,a=this,s=this;this.player.on("loadedmetadata",function(){s.stateMachine.updateMetadata()}),this.player.ready(function(){s.eventCallback(E.Event.READY,{})}),this.player.on("play",function(){s.eventCallback(E.Event.PLAY,{currentTime:this.currentTime()})}),this.player.on("pause",function(){s.eventCallback(E.Event.PAUSE,{currentTime:this.currentTime()})}),this.player.on("error",function(){var t=this.error();s.eventCallback(E.Event.ERROR,{currentTime:this.currentTime(),code:t.code,message:t.message})}),this.player.on("volumechange",function(){this.muted()?s.eventCallback(E.Event.MUTE,{currentTime:this.currentTime()}):s.eventCallback(E.Event.UN_MUTE,{currentTime:this.currentTime()})}),this.player.on("seeking",function(){s.eventCallback(E.Event.SEEK,{currentTime:this.currentTime(),droppedFrames:0})}),this.player.on("seeked",function(){s.eventCallback(E.Event.SEEKED,{currentTime:this.currentTime(),droppedFrames:0})});Date.now();var i=!1;this.player.on("timeupdate",function(){var a=this;clearTimeout(n),i=!1,Date.now(),s.eventCallback(E.Event.TIMECHANGED,{currentTime:this.currentTime()});var r=this.tech_.hls.playlists.media();if(r){var o=r.attributes,l=o.BANDWIDTH,c=o.RESOLUTION.width,u=o.RESOLUTION.height;if(t!==l){var d={width:c,height:u,bitrate:l,currentTime:this.currentTime()};s.eventCallback(E.Event.VIDEO_CHANGE,d),t=l}if(n=window.setTimeout(function(){(!a.paused()&&!a.ended()||i)&&s.eventCallback(E.Event.START_BUFFERING,{currentTime:a.currentTime()})},e.BUFFERING_TIMECHANGED_TIMEOUT),this.tech({IWillNotUseThisInPlugins:!0}).hls){var h=this.tech_.hls;if(!h.playlists||"function"!=typeof h.playlists.media)return;var m=h.playlists.media();if(!m)return;var p=m.attributes,A=p.BANDWIDTH,f=p.RESOLUTION.width,v=p.RESOLUTION.height;if(isNaN(t)||t!==A){d={width:f,height:v,bitrate:A,currentTime:this.currentTime()};s.eventCallback(E.Event.VIDEO_CHANGE,d),t=A}}}}),this.player.on("stalled",function(){i=!0}),window.onunload=window.onbeforeunload=function(){a.onBeforeUnLoadEvent||(a.onBeforeUnLoadEvent=!0,a.eventCallback(E.Event.UNLOAD,{currentTime:a.player.currentTime()}))}},e.prototype.sourceChange=function(t,e){this.stateMachine.sourceChange(t,e,this.player.currentTime())},e.BUFFERING_TIMECHANGED_TIMEOUT=1e3,e}(i.InternalAdapter);e.VideojsInternalAdapter=d},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(4),i=n(23),r=n(5),o=function(t){function e(e,n,a){var s=t.call(this)||this;return s.internalAdapter=new i.VideojsInternalAdapter(n,a),s.analytics=new r.Analytics(e,n,s.internalAdapter),s}return a(e,t),e}(s.Adapter);e.VideojsAdapter=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(0),i=n(0),r=n(8),o=n(3),E=n(12);!function(t){t.SETUP="SETUP",t.STARTUP="STARTUP",t.READY="READY",t.PLAYING="PLAYING",t.REBUFFERING="REBUFFERING",t.PAUSE="PAUSE",t.QUALITYCHANGE="QUALITYCHANGE",t.PAUSED_SEEKING="PAUSED_SEEKING",t.PLAY_SEEKING="PLAY_SEEKING",t.END_PLAY_SEEKING="END_PLAY_SEEKING",t.QUALITYCHANGE_PAUSE="QUALITYCHANGE_PAUSE",t.QUALITYCHANGE_REBUFFERING="QUALITYCHANGE_REBUFFERING",t.END="END",t.ERROR="ERROR",t.AD="AD",t.MUTING_READY="MUTING_READY",t.MUTING_PLAY="MUTING_PLAY",t.MUTING_PAUSE="MUTING_PAUSE",t.CASTING="CASTING",t.SOURCE_CHANGING="SOURCE_CHANGING"}(a||(a={}));var l=function(){function t(t,e){var n=this;this.debuggingStates=[],this.enabledDebugging=!1,this.sourceChange=function(t,e,a){n.callEvent(o.Event.MANUAL_SOURCE_CHANGE,{config:t,currentTime:a},e)},this.stateMachineCallbacks=t,this.pausedTimestamp=null,this.seekTimestamp=0,this.seekedTimestamp=0,this.seekedTimeout=0,this.onEnterStateTimestamp=0,this.states=a,this.createStateMachine(e)}return t.prototype.getAllStates=function(){var t=this;return Object.keys(this.states).map(function(e){return t.states[e]}).concat(["FINISH_PLAY_SEEKING","PLAY_SEEK","FINISH_QUALITYCHANGE_PAUSE","FINISH_QUALITYCHANGE","FINISH_QUALITYCHANGE_REBUFFERING"])},t.prototype.createStateMachine=function(e){var n=this;this.stateMachine=r.create({initial:this.states.SETUP,error:function(t,e,n,a,i,r){s.logger.error("Error in statemachine: "+r)},events:[{name:o.Event.READY,from:[this.states.SETUP,this.states.ERROR],to:this.states.READY},{name:o.Event.PLAY,from:this.states.READY,to:this.states.STARTUP},{name:o.Event.START_BUFFERING,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.END_BUFFERING,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.VIDEO_CHANGE,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.AUDIO_CHANGE,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.TIMECHANGED,from:this.states.STARTUP,to:this.states.PLAYING},{name:o.Event.TIMECHANGED,from:this.states.PLAYING,to:this.states.PLAYING},{name:o.Event.END_BUFFERING,from:this.states.PLAYING,to:this.states.PLAYING},{name:o.Event.START_BUFFERING,from:this.states.PLAYING,to:this.states.REBUFFERING},{name:o.Event.END_BUFFERING,from:this.states.REBUFFERING,to:this.states.PLAYING},{name:o.Event.TIMECHANGED,from:this.states.REBUFFERING,to:this.states.REBUFFERING},{name:o.Event.PAUSE,from:this.states.PLAYING,to:this.states.PAUSE},{name:o.Event.PAUSE,from:this.states.REBUFFERING,to:this.states.PAUSE},{name:o.Event.PLAY,from:this.states.PAUSE,to:this.states.PLAYING},{name:o.Event.VIDEO_CHANGE,from:this.states.PLAYING,to:this.states.QUALITYCHANGE},{name:o.Event.AUDIO_CHANGE,from:this.states.PLAYING,to:this.states.QUALITYCHANGE},{name:o.Event.VIDEO_CHANGE,from:this.states.QUALITYCHANGE,to:this.states.QUALITYCHANGE},{name:o.Event.AUDIO_CHANGE,from:this.states.QUALITYCHANGE,to:this.states.QUALITYCHANGE},{name:"FINISH_QUALITYCHANGE",from:this.states.QUALITYCHANGE,to:this.states.PLAYING},{name:o.Event.VIDEO_CHANGE,from:this.states.PAUSE,to:this.states.QUALITYCHANGE_PAUSE},{name:o.Event.AUDIO_CHANGE,from:this.states.PAUSE,to:this.states.QUALITYCHANGE_PAUSE},{name:o.Event.VIDEO_CHANGE,from:this.states.QUALITYCHANGE_PAUSE,to:this.states.QUALITYCHANGE_PAUSE},{name:o.Event.AUDIO_CHANGE,from:this.states.QUALITYCHANGE_PAUSE,to:this.states.QUALITYCHANGE_PAUSE},{name:"FINISH_QUALITYCHANGE_PAUSE",from:this.states.QUALITYCHANGE_PAUSE,to:this.states.PAUSE},{name:o.Event.SEEK,from:this.states.PAUSE,to:this.states.PAUSED_SEEKING},{name:o.Event.SEEK,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.AUDIO_CHANGE,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.VIDEO_CHANGE,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.START_BUFFERING,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.END_BUFFERING,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.SEEKED,from:this.states.PAUSED_SEEKING,to:this.states.PAUSE},{name:o.Event.PLAY,from:this.states.PAUSED_SEEKING,to:this.states.PLAYING},{name:o.Event.PAUSE,from:this.states.PAUSED_SEEKING,to:this.states.PAUSE},{name:"PLAY_SEEK",from:this.states.PAUSE,to:this.states.PLAY_SEEKING},{name:"PLAY_SEEK",from:this.states.PAUSED_SEEKING,to:this.states.PLAY_SEEKING},{name:"PLAY_SEEK",from:this.states.PLAY_SEEKING,to:this.states.PLAY_SEEKING},{name:o.Event.SEEK,from:this.states.PLAY_SEEKING,to:this.states.PLAY_SEEKING},{name:o.Event.AUDIO_CHANGE,from:this.states.PLAY_SEEKING,to:this.states.PLAY_SEEKING},{name:o.Event.VIDEO_CHANGE,from:this.states.PLAY_SEEKING,to:this.states.PLAY_SEEKING},{name:o.Event.START_BUFFERING,from:this.states.PLAY_SEEKING,to:this.states.PLAY_SEEKING},{name:o.Event.END_BUFFERING,from:this.states.PLAY_SEEKING,to:this.states.PLAY_SEEKING},{name:o.Event.SEEKED,from:this.states.PLAY_SEEKING,to:this.states.PLAY_SEEKING},{name:o.Event.PLAY,from:this.states.PLAY_SEEKING,to:this.states.END_PLAY_SEEKING},{name:o.Event.START_BUFFERING,from:this.states.END_PLAY_SEEKING,to:this.states.END_PLAY_SEEKING},{name:o.Event.END_BUFFERING,from:this.states.END_PLAY_SEEKING,to:this.states.END_PLAY_SEEKING},{name:o.Event.SEEKED,from:this.states.END_PLAY_SEEKING,to:this.states.END_PLAY_SEEKING},{name:o.Event.TIMECHANGED,from:this.states.END_PLAY_SEEKING,to:this.states.PLAYING},{name:o.Event.END,from:this.states.PLAY_SEEKING,to:this.states.END},{name:o.Event.END,from:this.states.PAUSED_SEEKING,to:this.states.END},{name:o.Event.END,from:this.states.PLAYING,to:this.states.END},{name:o.Event.END,from:this.states.PAUSE,to:this.states.END},{name:o.Event.SEEK,from:this.states.END,to:this.states.END},{name:o.Event.SEEKED,from:this.states.END,to:this.states.END},{name:o.Event.TIMECHANGED,from:this.states.END,to:this.states.END},{name:o.Event.END_BUFFERING,from:this.states.END,to:this.states.END},{name:o.Event.START_BUFFERING,from:this.states.END,to:this.states.END},{name:o.Event.END,from:this.states.END,to:this.states.END},{name:o.Event.PLAY,from:this.states.END,to:this.states.STARTUP},{name:o.Event.ERROR,from:this.getAllStates(),to:this.states.ERROR},{name:o.Event.SEEK,from:this.states.END_PLAY_SEEKING,to:this.states.PLAY_SEEKING},{name:"FINISH_PLAY_SEEKING",from:this.states.END_PLAY_SEEKING,to:this.states.PLAYING},{name:o.Event.UNLOAD,from:this.getAllStates(),to:this.states.END},{name:o.Event.START_AD,from:this.states.PLAYING,to:this.states.AD},{name:o.Event.END_AD,from:this.states.AD,to:this.states.PLAYING},{name:o.Event.MUTE,from:this.states.READY,to:this.states.MUTING_READY},{name:o.Event.UN_MUTE,from:this.states.READY,to:this.states.MUTING_READY},{name:"FINISH_MUTING",from:this.states.MUTING_READY,to:this.states.READY},{name:o.Event.MUTE,from:this.states.PLAYING,to:this.states.MUTING_PLAY},{name:o.Event.UN_MUTE,from:this.states.PLAYING,to:this.states.MUTING_PLAY},{name:"FINISH_MUTING",from:this.states.MUTING_PLAY,to:this.states.PLAYING},{name:o.Event.MUTE,from:this.states.PAUSE,to:this.states.MUTING_PAUSE},{name:o.Event.UN_MUTE,from:this.states.PAUSE,to:this.states.MUTING_PAUSE},{name:"FINISH_MUTING",from:this.states.MUTING_PAUSE,to:this.states.PAUSE},{name:o.Event.START_CAST,from:[this.states.READY,this.states.PAUSE],to:this.states.CASTING},{name:o.Event.PAUSE,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.PLAY,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.TIMECHANGED,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.MUTE,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.SEEK,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.SEEKED,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.END_CAST,from:this.states.CASTING,to:this.states.READY},{name:o.Event.SEEK,from:this.states.READY,to:this.states.READY},{name:o.Event.SEEKED,from:this.states.READY,to:this.states.READY},{name:o.Event.SEEKED,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.MANUAL_SOURCE_CHANGE,from:this.getAllStates(),to:this.states.SOURCE_CHANGING},{name:o.Event.SOURCE_UNLOADED,from:this.getAllStates(),to:this.states.SOURCE_CHANGING},{name:o.Event.READY,from:this.states.SOURCE_CHANGING,to:this.states.READY},{name:o.Event.VIDEO_CHANGE,from:this.states.REBUFFERING,to:this.states.QUALITYCHANGE_REBUFFERING},{name:o.Event.AUDIO_CHANGE,from:this.states.REBUFFERING,to:this.states.QUALITYCHANGE_REBUFFERING},{name:o.Event.VIDEO_CHANGE,from:this.states.QUALITYCHANGE_REBUFFERING,to:this.states.QUALITYCHANGE_REBUFFERING},{name:o.Event.AUDIO_CHANGE,from:this.states.QUALITYCHANGE_REBUFFERING,to:this.states.QUALITYCHANGE_REBUFFERING},{name:"FINISH_QUALITYCHANGE_REBUFFERING",from:this.states.QUALITYCHANGE_REBUFFERING,to:this.states.REBUFFERING}],callbacks:{onpause:function(t,e,a,s){e===n.states.PLAYING&&(n.pausedTimestamp=s)},onbeforeevent:function(e,a,s,i,r){return e===o.Event.SEEK&&a===n.states.PAUSE&&(n.seekTimestamp=i,i-n.pausedTimestamp<t.PAUSE_SEEK_DELAY)?(n.stateMachine.PLAY_SEEK(i),!1):(e===o.Event.SEEK&&window.clearTimeout(n.seekedTimeout),e===o.Event.SEEKED&&a===n.states.PAUSED_SEEKING?(n.seekedTimestamp=i,n.seekedTimeout=window.setTimeout(function(){n.stateMachine.pause(i,r)},t.SEEKED_PAUSE_DELAY),!1):(a!==n.states.REBUFFERING||s!==n.states.QUALITYCHANGE_REBUFFERING)&&void 0)},onafterevent:function(t,e,a,s){a===n.states.QUALITYCHANGE_PAUSE&&n.stateMachine.FINISH_QUALITYCHANGE_PAUSE(s),a===n.states.QUALITYCHANGE&&n.stateMachine.FINISH_QUALITYCHANGE(s),a===n.states.QUALITYCHANGE_REBUFFERING&&n.stateMachine.FINISH_QUALITYCHANGE_REBUFFERING(s),a!==n.states.MUTING_READY&&a!==n.states.MUTING_PLAY&&a!==n.states.MUTING_PAUSE||n.stateMachine.FINISH_MUTING(s)},onenterstate:function(t,a,r,E,l){"none"===a&&e.starttime?n.onEnterStateTimestamp=e.starttime:n.onEnterStateTimestamp=E||(new Date).getTime(),s.logger.log("[ENTER] "+i.padRight(r,20)+"EVENT: "+i.padRight(t,20)+" from "+i.padRight(a,14)),l&&r!==n.states.PAUSED_SEEKING&&r!==n.states.PLAY_SEEKING&&r!==n.states.END_PLAY_SEEKING&&n.stateMachineCallbacks.setVideoTimeStartFromEvent(l),t===o.Event.START_CAST&&r===n.states.CASTING&&n.stateMachineCallbacks.startCasting(E,l)},onleavestate:function(t,e,a,i,r){if(i){n.addStatesToLog(t,e,a,i,r);var E=i-n.onEnterStateTimestamp;if(r&&a!==n.states.PAUSED_SEEKING&&a!==n.states.PLAY_SEEKING&&a!==n.states.END_PLAY_SEEKING&&n.stateMachineCallbacks.setVideoTimeEndFromEvent(r),"PLAY_SEEK"===t&&e===n.states.PAUSE)return!0;var l=String(e).toLowerCase();if(e===n.states.END_PLAY_SEEKING||e===n.states.PAUSED_SEEKING){var c=n.seekedTimestamp-n.seekTimestamp;n.stateMachineCallbacks[l](c,l,r)}else if(t===o.Event.UNLOAD&&e===n.states.PLAYING)n.stateMachineCallbacks.playingAndBye(E,l,r);else if(e===n.states.PAUSE&&a!==n.states.PAUSED_SEEKING)n.stateMachineCallbacks.setVideoTimeStartFromEvent(t),n.stateMachineCallbacks.pause(E,l,r);else{var u=n.stateMachineCallbacks[l];"function"==typeof u?u(E,l,r):s.logger.error("Could not find callback function for "+l)}r&&a!==n.states.PAUSED_SEEKING&&a!==n.states.PLAY_SEEKING&&a!==n.states.END_PLAY_SEEKING&&n.stateMachineCallbacks.setVideoTimeStartFromEvent(r),t===o.Event.VIDEO_CHANGE?n.stateMachineCallbacks.videoChange(r):t===o.Event.AUDIO_CHANGE?n.stateMachineCallbacks.audioChange(r):t===o.Event.MUTE?n.stateMachineCallbacks.mute():t===o.Event.UN_MUTE?n.stateMachineCallbacks.unMute():t===o.Event.MANUAL_SOURCE_CHANGE&&n.stateMachineCallbacks.manualSourceChange(r)}},onseek:function(t,e,a,s){n.seekTimestamp=s},onseeked:function(t,e,a,s){n.seekedTimestamp=s},ontimechanged:function(t,e,a,s,i){var r=s-n.onEnterStateTimestamp;r>59700&&(n.stateMachineCallbacks.setVideoTimeEndFromEvent(i),n.stateMachineCallbacks.heartbeat(r,String(e).toLowerCase(),i),n.onEnterStateTimestamp=s,n.stateMachineCallbacks.setVideoTimeStartFromEvent(i))},onplayerError:function(t,e,a,s,i){n.stateMachineCallbacks.error(i)}}})},t.prototype.callEvent=function(t,e,n){var a=this.stateMachine[t];if(a)try{a.call(this.stateMachine,n,e)}catch(n){s.logger.error("Exception occured in State Machine callback "+t,a,e,n)}else s.logger.log("Ignored Event: "+t)},t.prototype.addStatesToLog=function(t,e,n,a,s){this.enabledDebugging&&this.debuggingStates.push(new E.EventDebugging(t,e,n,a,s))},t.prototype.getStates=function(){return this.debuggingStates},t.prototype.setEnabledDebugging=function(t){this.enabledDebugging=t},t.prototype.updateMetadata=function(t){},t.PAUSE_SEEK_DELAY=200,t.SEEKED_PAUSE_DELAY=300,t}();e.Bitmovin7AnalyticsStateMachine=l},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),s=this&&this.__assign||Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t};Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),r=n(25),o=n(2),E=n(11),l=n(3),c=n(7),u=function(t){function e(e,n){var a=t.call(this,n)||this;return a.player=e,a._drmPerformanceInfo={drmUsed:!1},a.onBeforeUnLoadEvent=!1,a.getPlayerVersion=function(){return a.player.version},a.getPlayerName=function(){return o.Player.BITMOVIN},a.getPlayerTech=function(){return a.player.getPlayerType()},a.stateMachine=new r.Bitmovin7AnalyticsStateMachine(a.stateMachineCallbacks,a.opts),a.register(),a}return a(e,t),Object.defineProperty(e.prototype,"drmPerformanceInfo",{get:function(){return this._drmPerformanceInfo},enumerable:!0,configurable:!0}),e.prototype.getAutoPlay=function(){return this.player.getConfig().playback&&this.player.getConfig().playback.autoplay||!1},e.prototype.getCurrentPlaybackInfo=function(){var e={},n=this.player.getConfig().source;if(n){var a=E.getSourceInfoFromBitmovinSourceConfig(n.progressive,this.player);e.videoTitle=n.title,e.mpdUrl=n.dash,e.m3u8Url=n.hls,e.progUrl=a.progUrl,e.progBitrate=a.progBitrate}var i=s({},t.prototype.getCommonPlaybackInfo.call(this),{size:this.player.isFullscreen()?c.PlayerSize.Fullscreen:c.PlayerSize.Window,playerTech:this.getPlayerTech(),isLive:this.player.isLive(),videoDuration:this.player.getDuration(),streamFormat:this.player.getStreamType(),videoWindowWidth:this.player.getFigure().offsetWidth,videoWindowHeight:this.player.getFigure().offsetHeight,isMuted:this.player.isMuted(),isCasting:this.player.isCasting()},e),r=this.player.getPlaybackVideoData();r&&(i.videoBitrate=r.bitrate,i.videoPlaybackHeight=r.height,i.videoPlaybackWidth=r.width),"progressive"===i.streamFormat&&(i.videoBitrate=e.progBitrate);var o=this.player.getPlaybackAudioData();return o&&(i.audioBitrate=o.bitrate),i},e.prototype.register=function(){var t=this;this.player.addEventHandler(this.player.EVENT.ON_SOURCE_UNLOADED,function(e){t.eventCallback(l.Event.SOURCE_UNLOADED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(this.player.EVENT.ON_SOURCE_LOADED,function(e){t.eventCallback(l.Event.SOURCE_LOADED,{})}),this.player.addEventHandler(this.player.EVENT.ON_READY,function(){t.eventCallback(l.Event.READY,{})}),this.player.addEventHandler(this.player.EVENT.ON_CAST_STARTED,function(e){t.eventCallback(l.Event.START_CAST,e)}),this.player.addEventHandler(this.player.EVENT.ON_CAST_STOPPED,function(){t.eventCallback(l.Event.END_CAST,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(this.player.EVENT.ON_PLAY,function(){t.eventCallback(l.Event.PLAY,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(this.player.EVENT.ON_PAUSED,function(){t.eventCallback(l.Event.PAUSE,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(this.player.EVENT.ON_TIME_CHANGED,function(){t.eventCallback(l.Event.TIMECHANGED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(this.player.EVENT.ON_SEEK,function(){t.eventCallback(l.Event.SEEK,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(this.player.EVENT.ON_SEEKED,function(){t.eventCallback(l.Event.SEEKED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(this.player.EVENT.ON_STALL_STARTED,function(){t.eventCallback(l.Event.START_BUFFERING,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(this.player.EVENT.ON_STALL_ENDED,function(){t.eventCallback(l.Event.END_BUFFERING,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(this.player.EVENT.ON_AUDIO_PLAYBACK_QUALITY_CHANGED,function(){var e=t.player.getPlaybackAudioData();t.eventCallback(l.Event.AUDIO_CHANGE,{bitrate:e.bitrate,currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(this.player.EVENT.ON_VIDEO_PLAYBACK_QUALITY_CHANGED,function(){var e=t.player.getPlaybackVideoData();t.eventCallback(l.Event.VIDEO_CHANGE,{width:e.width,height:e.height,bitrate:e.bitrate,currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(this.player.EVENT.ON_FULLSCREEN_ENTER,function(){t.eventCallback(l.Event.START_FULLSCREEN,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(this.player.EVENT.ON_FULLSCREEN_EXIT,function(){t.eventCallback(l.Event.END_FULLSCREEN,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(this.player.EVENT.ON_AD_STARTED,function(){t.eventCallback(l.Event.START_AD,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(this.player.EVENT.ON_AD_FINISHED,function(){t.eventCallback(l.Event.END_AD,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(this.player.EVENT.ON_MUTED,function(){t.eventCallback(l.Event.MUTE,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(this.player.EVENT.ON_UNMUTED,function(){t.eventCallback(l.Event.UN_MUTE,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(this.player.EVENT.ON_ERROR,function(e){t.eventCallback(l.Event.ERROR,{code:e.code,message:e.message,currentTime:t.player.getCurrentTime()})}),this.player.addEventHandler(this.player.EVENT.ON_PLAYBACK_FINISHED,function(){t.eventCallback(l.Event.PLAYBACK_FINISHED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(this.player.EVENT.ON_DOWNLOAD_FINISHED,function(e){0===e.downloadType.indexOf("drm/license/")&&(t.drmPerformanceInfo.drmTime=1e3*e.downloadTime,t.drmPerformanceInfo.drmInfo=e.downloadType.replace("drm/license/",""),t.drmPerformanceInfo.drmUsed=!0)}),window.onunload=window.onbeforeunload=function(){t.onBeforeUnLoadEvent||(t.onBeforeUnLoadEvent=!0,t.eventCallback(l.Event.UNLOAD,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()}))}},e.prototype.sourceChange=function(t,e){this.stateMachine.sourceChange(t,e,this.player.getCurrentTime())},e}(i.InternalAdapter);e.Bitmovin7InternalAdapter=u},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(5),i=n(0),r=n(4),o=n(26),E=function(t){function e(e,n){var a=t.call(this)||this;return a.augment(e,n),a}return a(e,t),e.prototype.augment=function(t,e){if(this.hasPlayerAlreadyBeenAugmented(t))i.logger.errorMessageToUser("Bitmovin Analytics is already hooked up to this player instance");else{this.markPlayerInstanceAsAugmented(t);var n=this,a=t.setup;t.setup=function(){var r=a.apply(t,arguments);if(0===arguments.length)return r;var E=arguments[0].analytics;return E?(n.internalAdapter=new o.Bitmovin7InternalAdapter(t,e),n.analytics=new s.Analytics(E,t,n.internalAdapter),t.analytics=n.analytics,n.wrapPlayerLoad(t,n.analytics),r):(i.logger.error("Bitmovin Analytics: No analytics config provided!"),r)}}},e.prototype.wrapPlayerLoad=function(t,e){var n=t.load;t.load=function(){if(arguments.length>0){var a=arguments[0].analytics;e.sourceChange(a)}return n.apply(t,arguments)}},e.prototype.hasPlayerAlreadyBeenAugmented=function(t){return t.__analyticsHasBeenSetup},e.prototype.markPlayerInstanceAsAugmented=function(t){t.__analyticsHasBeenSetup=!0},e}(r.Adapter);e.Bitmovin7Adapter=E},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=function(){function t(t,e){var n=this;this.handleSegmentPlaybackEvent=function(t){n.segmentTracker.removeSegment(t.url)},this.segmentTracker=e,t.on(t.exports.PlayerEvent.DownloadFinished,function(t){return n.handleOnDownloadFinishEvent(t)}),t.on(t.exports.PlayerEvent.SegmentPlayback,function(t){return n.handleSegmentPlaybackEvent(t)})}return t.prototype.getSegmentTracker=function(){return this.segmentTracker},t.prototype.handleOnDownloadFinishEvent=function(t){if(0===t.downloadType.indexOf("media/video")){var e=t.url,n={name:a.getURLResourceName(e),url:e,timestamp:t.timestamp};this.segmentTracker.addSegment(n)}},t}();e.Bitmovin8SegmentTrackerAdapter=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(){this.segments=[]}return t.prototype.reset=function(){this.segments=[]},t.prototype.addSegment=function(t){this.segments.push(t)},t.prototype.removeSegment=function(t){this.segments=this.segments.filter(function(e){return e.url!==t})},t.prototype.getSegments=function(){return this.segments},t}();e.SegmentTracker=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){var n=this;this.meter=e,t.on(t.exports.PlayerEvent.DownloadFinished,function(t){return n.handleOnDownloadFinishEvent(t)})}return t.prototype.getDownloadSpeedMeter=function(){return this.meter},t.prototype.handleOnDownloadFinishEvent=function(t){t.success&&0===t.downloadType.indexOf("media/video")&&this.meter.addMeasurement({duration:t.downloadTime,size:t.size,timeToFirstByte:t.timeToFirstByte,timestamp:new Date,httpStatus:t.httpStatus})},t}();e.Bitmovin8SpeedMeterAdapter=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t){this.download=t}return Object.defineProperty(t.prototype,"speed",{get:function(){return this.download.size/this.download.duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.download.duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.download.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeToFirstByte",{get:function(){return this.download.timeToFirstByte},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timestamp",{get:function(){return this.download.timestamp},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"httpStatus",{get:function(){return this.download.httpStatus},enumerable:!0,configurable:!0}),t}();e.Measure=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=function(){function t(){}return t.bytesToBits=function(t){return 8*t},t.bitsToBytes=function(t){return Math.round(t/8)},t.bytesToKiloBytes=function(t){return a.calculateTime(1e3*t)},t.kiloBytesToMegaBytes=function(t){return 1e3*t},t}();e.Converter=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(32),s=n(31),i=function(){function t(){this.measures=[]}return t.prototype.reset=function(){this.measures=[]},t.prototype.addMeasurement=function(t){if(!(t.httpStatus>=400)){var e=new s.Measure(t),n=a.Converter.bitsToBytes(3e8);e.speed>=n||this.measures.push(e)}},t.prototype.getInfo=function(){return{segmentsDownloadCount:this.measures.length,segmentsDownloadSize:this.measures.map(function(t){return t.size}).reduce(this.add,0),segmentsDownloadTime:Math.ceil(1e3*this.totalTime()),avgDownloadSpeed:this.avgSpeed(),minDownloadSpeed:this.minSpeed(),maxDownloadSpeed:this.maxSpeed(),avgTimeToFirstByte:this.avgTimeToFirstByte()}},t.prototype.add=function(t,e){return t+e},t.prototype.avgSpeed=function(){if(0===this.measures.length)return 0;var t=this.speeds().reduce(function(t,e){return t+e},0),e=this.measures.length;return this.bytePerSecondToBitPerSecond(t/e)},t.prototype.bytePerSecondToBitPerSecond=function(t){return a.Converter.bytesToBits(t)},t.prototype.minSpeed=function(){return 0===this.measures.length?0:this.bytePerSecondToBitPerSecond(Math.min.apply(Math,this.speeds()))},t.prototype.speeds=function(){return this.measures.map(function(t){return t.speed})},t.prototype.maxSpeed=function(){return 0===this.measures.length?0:this.bytePerSecondToBitPerSecond(Math.max.apply(Math,this.speeds()))},t.prototype.totalTime=function(){return 0===this.measures.length?0:this.measures.reduce(function(t,e){return t+e.duration},0)},t.prototype.avgTimeToFirstByte=function(){if(0===this.measures.length)return 0;var t=this.measures.reduce(function(t,e){return t+1e3*e.timeToFirstByte},0)/this.measures.length;return Math.ceil(t)},t}();e.DownloadSpeedMeter=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){return function(){this.onAdStarted=function(t){},this.onAdFinished=function(t){},this.onAdBreakStarted=function(t){},this.onAdBreakFinished=function(t){},this.onAdClicked=function(t){},this.onAdError=function(t){},this.onAdManifestLoaded=function(t){},this.onAdQuartile=function(t){},this.onAdSkipped=function(t){},this.onPlay=function(t){},this.onPause=function(t){},this.onBeforeUnload=function(){}}}();e.AdCallbacks=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(34),s=function(){function t(t){var e=this;this.player=t,this.adCallbacks=new a.AdCallbacks,this.isLinearAdActive=function(){return e.player.ads&&e.player.ads.isLinearAdActive()||!1},this.getContainer=function(){return e.player.getContainer()},this.getAdModuleInfo=function(){return e.player.ads?e.player.ads.getModuleInfo():{name:void 0,version:void 0}},this.currentTime=function(){return e.player.getCurrentTime()},this.register()}return t.prototype.register=function(){var t=this;this.player.on(this.player.exports.PlayerEvent.Play,function(e){"advertising-api"===e.issuer&&t.adCallbacks.onPlay(e.issuer)}),this.player.on(this.player.exports.PlayerEvent.Paused,function(e){"advertising-api"===e.issuer&&t.adCallbacks.onPause(e.issuer)}),this.player.on(this.player.exports.PlayerEvent.AdStarted,function(e){t.adCallbacks.onAdStarted(e)}),this.player.on(this.player.exports.PlayerEvent.AdFinished,function(e){t.adCallbacks.onAdFinished(e)}),this.player.on(this.player.exports.PlayerEvent.AdBreakStarted,function(e){t.adCallbacks.onAdBreakStarted(e)}),this.player.on(this.player.exports.PlayerEvent.AdBreakFinished,function(e){t.adCallbacks.onAdBreakFinished(e)}),this.player.on(this.player.exports.PlayerEvent.AdClicked,function(e){t.adCallbacks.onAdClicked(e)}),this.player.on(this.player.exports.PlayerEvent.AdQuartile,function(e){t.adCallbacks.onAdQuartile(e)}),this.player.on(this.player.exports.PlayerEvent.AdSkipped,function(e){t.adCallbacks.onAdSkipped(e)}),this.player.on(this.player.exports.PlayerEvent.AdError,function(e){t.adCallbacks.onAdError(e)}),this.player.on(this.player.exports.PlayerEvent.AdManifestLoaded,function(e){t.adCallbacks.onAdManifestLoaded(e)}),window.onunload=window.onbeforeunload=function(){t.adCallbacks.onBeforeUnload()}},t}();e.Bitmovin8AdModule=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(0),i=n(0),r=n(8),o=n(3),E=n(12),l=n(1);!function(t){t.SETUP="SETUP",t.STARTUP="STARTUP",t.READY="READY",t.PLAYING="PLAYING",t.REBUFFERING="REBUFFERING",t.PAUSE="PAUSE",t.QUALITYCHANGE="QUALITYCHANGE",t.PAUSED_SEEKING="PAUSED_SEEKING",t.END_PAUSED_SEEKING="END_PAUSED_SEEKING",t.PLAY_SEEKING="PLAY_SEEKING",t.END_PLAY_SEEKING="END_PLAY_SEEKING",t.QUALITYCHANGE_PAUSE="QUALITYCHANGE_PAUSE",t.QUALITYCHANGE_REBUFFERING="QUALITYCHANGE_REBUFFERING",t.END="END",t.ERROR="ERROR",t.AD_STARTUP="AD_STARTUP",t.AD_READY="AD_READY",t.AD_PAUSE="AD_PAUSE",t.AD_PLAYING="AD_PLAYING",t.MUTING_READY="MUTING_READY",t.MUTING_PLAY="MUTING_PLAY",t.MUTING_PAUSE="MUTING_PAUSE",t.CASTING="CASTING",t.SOURCE_CHANGING="SOURCE_CHANGING",t.SOURCE_LOADED="SOURCE_LOADED"}(a||(a={}));var c=function(){function t(t,e){var n=this;this.debuggingStates=[],this.enabledDebugging=!1,this.sourceChange=function(t,e,a){n.callEvent(o.Event.MANUAL_SOURCE_CHANGE,{config:t,currentTime:a},e)},this.stateMachineCallbacks=t,this.seekTimestamp=0,this.seekedTimestamp=0,this.onEnterStateTimestamp=0,this.createStateMachine(e)}return t.prototype.getAllStatesBut=function(t){return this.getAllStates().filter(function(e){return e!==t})},t.prototype.getAllStates=function(){return Object.keys(a).map(function(t){return a[t]})},t.prototype.createStateMachine=function(t){var e=this;this.stateMachine=r.create({initial:a.SETUP,error:function(t,e,n,a,i,r){s.logger.error("Error in statemachine: "+r)},events:[{name:o.Event.SOURCE_LOADED,from:[a.SETUP,a.ERROR,a.SOURCE_CHANGING],to:a.READY},{name:o.Event.PLAY,from:a.READY,to:a.STARTUP},{name:o.Event.PLAYING,from:a.READY,to:a.PLAYING},{name:o.Event.READY,from:a.READY,to:a.READY},{name:o.Event.VIDEO_CHANGE,from:a.READY,to:a.READY},{name:o.Event.AUDIO_CHANGE,from:a.READY,to:a.READY},{name:o.Event.PLAY,from:a.STARTUP,to:a.STARTUP},{name:o.Event.PLAYING,from:a.STARTUP,to:a.STARTUP},{name:o.Event.TIMECHANGED,from:a.STARTUP,to:a.PLAYING},{name:o.Event.START_BUFFERING,from:a.STARTUP,to:a.STARTUP},{name:o.Event.END_BUFFERING,from:a.STARTUP,to:a.STARTUP},{name:o.Event.VIDEO_CHANGE,from:a.STARTUP,to:a.STARTUP},{name:o.Event.AUDIO_CHANGE,from:a.STARTUP,to:a.STARTUP},{name:o.Event.READY,from:a.STARTUP,to:a.STARTUP},{name:o.Event.PLAYING,from:a.PLAYING,to:a.PLAYING},{name:o.Event.TIMECHANGED,from:a.PLAYING,to:a.PLAYING},{name:o.Event.END_BUFFERING,from:a.PLAYING,to:a.PLAYING},{name:o.Event.START_BUFFERING,from:a.PLAYING,to:a.REBUFFERING},{name:o.Event.END_BUFFERING,from:a.REBUFFERING,to:a.PLAYING},{name:o.Event.TIMECHANGED,from:a.REBUFFERING,to:a.REBUFFERING},{name:o.Event.PAUSE,from:a.PLAYING,to:a.PAUSE},{name:o.Event.PAUSE,from:a.REBUFFERING,to:a.PAUSE},{name:o.Event.PLAY,from:a.PAUSE,to:a.PLAYING},{name:o.Event.VIDEO_CHANGE,from:a.PLAYING,to:a.QUALITYCHANGE},{name:o.Event.AUDIO_CHANGE,from:a.PLAYING,to:a.QUALITYCHANGE},{name:o.Event.VIDEO_CHANGE,from:a.QUALITYCHANGE,to:a.QUALITYCHANGE},{name:o.Event.AUDIO_CHANGE,from:a.QUALITYCHANGE,to:a.QUALITYCHANGE},{name:"FINISH_QUALITYCHANGE",from:a.QUALITYCHANGE,to:a.PLAYING},{name:o.Event.VIDEO_CHANGE,from:a.PAUSE,to:a.QUALITYCHANGE_PAUSE},{name:o.Event.AUDIO_CHANGE,from:a.PAUSE,to:a.QUALITYCHANGE_PAUSE},{name:o.Event.VIDEO_CHANGE,from:a.QUALITYCHANGE_PAUSE,to:a.QUALITYCHANGE_PAUSE},{name:o.Event.AUDIO_CHANGE,from:a.QUALITYCHANGE_PAUSE,to:a.QUALITYCHANGE_PAUSE},{name:"FINISH_QUALITYCHANGE_PAUSE",from:a.QUALITYCHANGE_PAUSE,to:a.PAUSE},{name:o.Event.SEEK,from:a.PAUSE,to:a.PAUSED_SEEKING},{name:o.Event.SEEK,from:a.PAUSED_SEEKING,to:a.PAUSED_SEEKING},{name:o.Event.SEEKED,from:a.PAUSED_SEEKING,to:a.PAUSE},{name:o.Event.PLAY,from:a.PAUSED_SEEKING,to:a.END_PAUSED_SEEKING},{name:o.Event.PLAYING,from:a.END_PAUSED_SEEKING,to:a.END_PAUSED_SEEKING},{name:o.Event.TIMECHANGED,from:a.END_PAUSED_SEEKING,to:a.END_PAUSED_SEEKING},{name:o.Event.SEEKED,from:a.END_PAUSED_SEEKING,to:a.PLAYING},{name:o.Event.AUDIO_CHANGE,from:a.PAUSED_SEEKING,to:a.PAUSED_SEEKING},{name:o.Event.VIDEO_CHANGE,from:a.PAUSED_SEEKING,to:a.PAUSED_SEEKING},{name:o.Event.START_BUFFERING,from:a.PAUSED_SEEKING,to:a.PAUSED_SEEKING},{name:o.Event.END_BUFFERING,from:a.PAUSED_SEEKING,to:a.PAUSED_SEEKING},{name:o.Event.SEEK,from:a.PLAYING,to:a.PLAY_SEEKING},{name:o.Event.SEEK,from:a.PLAY_SEEKING,to:a.PLAY_SEEKING},{name:o.Event.AUDIO_CHANGE,from:a.PLAY_SEEKING,to:a.PLAY_SEEKING},{name:o.Event.VIDEO_CHANGE,from:a.PLAY_SEEKING,to:a.PLAY_SEEKING},{name:o.Event.START_BUFFERING,from:a.PLAY_SEEKING,to:a.PLAY_SEEKING},{name:o.Event.END_BUFFERING,from:a.PLAY_SEEKING,to:a.PLAY_SEEKING},{name:o.Event.PLAY,from:a.PLAY_SEEKING,to:a.END_PLAY_SEEKING},{name:o.Event.PLAYING,from:a.PLAY_SEEKING,to:a.END_PLAY_SEEKING},{name:o.Event.SEEKED,from:a.PLAY_SEEKING,to:a.END_PLAY_SEEKING},{name:o.Event.SEEK,from:a.END_PLAY_SEEKING,to:a.PLAY_SEEKING},{name:o.Event.START_BUFFERING,from:a.END_PLAY_SEEKING,to:a.END_PLAY_SEEKING},{name:o.Event.END_BUFFERING,from:a.END_PLAY_SEEKING,to:a.END_PLAY_SEEKING},{name:o.Event.SEEKED,from:a.END_PLAY_SEEKING,to:a.END_PLAY_SEEKING},{name:o.Event.PLAY,from:a.END_PLAY_SEEKING,to:a.END_PLAY_SEEKING},{name:o.Event.PLAYING,from:a.END_PLAY_SEEKING,to:a.PLAYING},{name:o.Event.TIMECHANGED,from:a.END_PLAY_SEEKING,to:a.PLAYING},{name:o.Event.END,from:a.PLAY_SEEKING,to:a.END},{name:o.Event.END,from:a.PAUSED_SEEKING,to:a.END},{name:o.Event.END,from:a.PLAYING,to:a.END},{name:o.Event.END,from:a.PAUSE,to:a.END},{name:o.Event.SEEK,from:a.END,to:a.END},{name:o.Event.SEEKED,from:a.END,to:a.END},{name:o.Event.TIMECHANGED,from:a.END,to:a.END},{name:o.Event.END_BUFFERING,from:a.END,to:a.END},{name:o.Event.START_BUFFERING,from:a.END,to:a.END},{name:o.Event.END,from:a.END,to:a.END},{name:o.Event.PLAY,from:a.END,to:a.STARTUP},{name:o.Event.ERROR,from:this.getAllStates(),to:a.ERROR},{name:o.Event.UNLOAD,from:this.getAllStates(),to:a.END},{name:o.Event.START_AD,from:a.STARTUP,to:a.AD_STARTUP},{name:o.Event.END_AD,from:a.AD_STARTUP,to:a.STARTUP},{name:o.Event.PLAY,from:a.AD_STARTUP,to:a.AD_STARTUP},{name:o.Event.PAUSE,from:a.AD_STARTUP,to:a.AD_STARTUP},{name:o.Event.TIMECHANGED,from:a.AD_STARTUP,to:a.AD_STARTUP},{name:o.Event.START_AD,from:a.READY,to:a.AD_READY},{name:o.Event.END_AD,from:a.AD_READY,to:a.READY},{name:o.Event.PLAY,from:a.AD_READY,to:a.AD_READY},{name:o.Event.PAUSE,from:a.AD_READY,to:a.AD_READY},{name:o.Event.TIMECHANGED,from:a.AD_READY,to:a.AD_READY},{name:o.Event.START_AD,from:a.PAUSE,to:a.AD_PAUSE},{name:o.Event.END_AD,from:a.AD_PAUSE,to:a.PAUSE},{name:o.Event.PLAY,from:a.AD_PAUSE,to:a.AD_PAUSE},{name:o.Event.PAUSE,from:a.AD_PAUSE,to:a.AD_PAUSE},{name:o.Event.TIMECHANGED,from:a.AD_PAUSE,to:a.AD_PAUSE},{name:o.Event.START_AD,from:a.PLAYING,to:a.AD_PLAYING},{name:o.Event.END_AD,from:a.AD_PLAYING,to:a.PLAYING},{name:o.Event.PLAY,from:a.AD_PLAYING,to:a.AD_PLAYING},{name:o.Event.PAUSE,from:a.AD_PLAYING,to:a.AD_PLAYING},{name:o.Event.TIMECHANGED,from:a.AD_PLAYING,to:a.AD_PLAYING},{name:o.Event.END,from:a.AD_PLAYING,to:a.END},{name:o.Event.MUTE,from:a.READY,to:a.MUTING_READY},{name:o.Event.UN_MUTE,from:a.READY,to:a.MUTING_READY},{name:"FINISH_MUTING",from:a.MUTING_READY,to:a.READY},{name:o.Event.MUTE,from:a.PLAYING,to:a.MUTING_PLAY},{name:o.Event.UN_MUTE,from:a.PLAYING,to:a.MUTING_PLAY},{name:"FINISH_MUTING",from:a.MUTING_PLAY,to:a.PLAYING},{name:o.Event.MUTE,from:a.PAUSE,to:a.MUTING_PAUSE},{name:o.Event.UN_MUTE,from:a.PAUSE,to:a.MUTING_PAUSE},{name:"FINISH_MUTING",from:a.MUTING_PAUSE,to:a.PAUSE},{name:o.Event.START_CAST,from:[a.READY,a.PAUSE],to:a.CASTING},{name:o.Event.PAUSE,from:a.CASTING,to:a.CASTING},{name:o.Event.PLAY,from:a.CASTING,to:a.CASTING},{name:o.Event.TIMECHANGED,from:a.CASTING,to:a.CASTING},{name:o.Event.MUTE,from:a.CASTING,to:a.CASTING},{name:o.Event.SEEK,from:a.CASTING,to:a.CASTING},{name:o.Event.SEEKED,from:a.CASTING,to:a.CASTING},{name:o.Event.END_CAST,from:a.CASTING,to:a.READY},{name:o.Event.SEEK,from:a.READY,to:a.READY},{name:o.Event.SEEKED,from:a.READY,to:a.READY},{name:o.Event.SEEKED,from:a.STARTUP,to:a.STARTUP},{name:o.Event.MANUAL_SOURCE_CHANGE,from:this.getAllStatesBut(a.SETUP),to:a.SOURCE_CHANGING},{name:o.Event.MANUAL_SOURCE_CHANGE,from:a.SETUP,to:a.SETUP},{name:o.Event.SOURCE_UNLOADED,from:this.getAllStates(),to:a.SOURCE_CHANGING},{name:o.Event.VIDEO_CHANGE,from:a.REBUFFERING,to:a.QUALITYCHANGE_REBUFFERING},{name:o.Event.AUDIO_CHANGE,from:a.REBUFFERING,to:a.QUALITYCHANGE_REBUFFERING},{name:o.Event.VIDEO_CHANGE,from:a.QUALITYCHANGE_REBUFFERING,to:a.QUALITYCHANGE_REBUFFERING},{name:o.Event.AUDIO_CHANGE,from:a.QUALITYCHANGE_REBUFFERING,to:a.QUALITYCHANGE_REBUFFERING},{name:"FINISH_QUALITYCHANGE_REBUFFERING",from:a.QUALITYCHANGE_REBUFFERING,to:a.REBUFFERING}],callbacks:{onbeforeevent:function(t,e,n,s,i){if(e===a.REBUFFERING&&n===a.QUALITYCHANGE_REBUFFERING)return!1},onafterevent:function(t,n,s,i){s===a.QUALITYCHANGE_PAUSE&&e.stateMachine.FINISH_QUALITYCHANGE_PAUSE(i),s===a.QUALITYCHANGE&&e.stateMachine.FINISH_QUALITYCHANGE(i),s===a.QUALITYCHANGE_REBUFFERING&&e.stateMachine.FINISH_QUALITYCHANGE_REBUFFERING(i),s!==a.MUTING_READY&&s!==a.MUTING_PLAY&&s!==a.MUTING_PAUSE||e.stateMachine.FINISH_MUTING(i)},onenterstate:function(n,r,E,l,c){"none"===r&&t.starttime?e.onEnterStateTimestamp=t.starttime:e.onEnterStateTimestamp=l||(new Date).getTime(),s.logger.log("[ENTER "+l+"] "+i.padRight(E,20)+"EVENT: "+i.padRight(n,20)+" from "+i.padRight(r,20)),c&&E!==a.END_PAUSED_SEEKING&&E!==a.END_PLAY_SEEKING&&e.stateMachineCallbacks.setVideoTimeStartFromEvent(c),n===o.Event.START_CAST&&E===a.CASTING&&e.stateMachineCallbacks.startCasting(l,c)},onleavestate:function(t,n,r,E,c){if(E){s.logger.log("[LEAVE "+E+"] "+i.padRight(n,20)+"EVENT: "+i.padRight(t,20)+" to "+i.padRight(r,20)),e.addStatesToLog(t,n,r,E,c);var u=E-e.onEnterStateTimestamp;if(n===a.PAUSED_SEEKING&&r===a.END_PAUSED_SEEKING)return!0;c&&r!==a.END_PAUSED_SEEKING&&r!==a.END_PLAY_SEEKING&&e.stateMachineCallbacks.setVideoTimeEndFromEvent(c);var d=String(n).toLowerCase();if(n===a.PAUSED_SEEKING||n===a.END_PAUSED_SEEKING){var h=E-e.seekTimestamp;e.stateMachineCallbacks.paused_seeking(h,d,c)}else if(n===a.END_PLAY_SEEKING){h=e.seekedTimestamp-e.seekTimestamp;e.stateMachineCallbacks.end_play_seeking(h,d,c)}else if(t===o.Event.UNLOAD&&n===a.PLAYING)e.stateMachineCallbacks.playingAndBye(u,d,c);else if(n===a.AD_PAUSE||n===a.AD_READY||n===a.AD_PLAYING||n===a.AD_STARTUP)e.stateMachineCallbacks.ad(u,"ad",c);else if(t===o.Event.START_AD&&n===a.STARTUP)l.noOp();else if(n!==a.ERROR){var m=e.stateMachineCallbacks[d];if("function"==typeof m)try{m(u,d,c)}catch(t){s.logger.error("Exception occured in State Machine callback "+d,c,t)}else s.logger.error("Could not find callback function for "+d)}c&&r!==a.END_PAUSED_SEEKING&&r!==a.END_PLAY_SEEKING&&e.stateMachineCallbacks.setVideoTimeStartFromEvent(c),t===o.Event.VIDEO_CHANGE?e.stateMachineCallbacks.videoChange(c):t===o.Event.AUDIO_CHANGE?e.stateMachineCallbacks.audioChange(c):t===o.Event.MUTE?e.stateMachineCallbacks.mute():t===o.Event.UN_MUTE?e.stateMachineCallbacks.unMute():t===o.Event.MANUAL_SOURCE_CHANGE&&e.stateMachineCallbacks.manualSourceChange(c)}},onseek:function(t,n,a,s){e.seekTimestamp=s},onseeked:function(t,n,a,s){e.seekedTimestamp=s},ontimechanged:function(t,n,a,s,i){var r=s-e.onEnterStateTimestamp;r>59700&&(e.stateMachineCallbacks.setVideoTimeEndFromEvent(i),e.stateMachineCallbacks.heartbeat(r,String(n).toLowerCase(),i),e.onEnterStateTimestamp=s,e.stateMachineCallbacks.setVideoTimeStartFromEvent(i))},onplayerError:function(t,n,a,s,i){e.stateMachineCallbacks.error(i)}}})},t.prototype.callEvent=function(t,e,n){var a=this.stateMachine[t];if(a)try{a.call(this.stateMachine,n,e)}catch(n){s.logger.error("Exception occured in State Machine callback "+t,a,e,n)}else s.logger.log("Ignored Event: "+t)},t.prototype.addStatesToLog=function(t,e,n,a,s){this.enabledDebugging&&this.debuggingStates.push(new E.EventDebugging(t,e,n,a,s))},t.prototype.getStates=function(){return this.debuggingStates},t.prototype.setEnabledDebugging=function(t){this.enabledDebugging=t},t.prototype.updateMetadata=function(t){},t}();e.Bitmovin8AnalyticsStateMachine=c},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),s=this&&this.__assign||Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t};Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(9),o=n(36),E=n(2),l=n(11),c=n(3),u=n(7),d=n(35),h=n(33),m=n(30),p=n(29),A=n(28);!function(t){t.Inline="inline",t.Fullscreen="fullscreen",t.PictureInPicture="pictureinpicture"}(i||(i={}));var f=function(t){function e(e,n){var a=t.call(this,n)||this;return a.player=e,a._drmPerformanceInfo={drmUsed:!1},a.onBeforeUnLoadEvent=!1,a.getPlayerVersion=function(){return a.player.version},a.getPlayerName=function(){return E.Player.BITMOVIN},a.getPlayerTech=function(){return a.player.getPlayerType()},a.stateMachine=new o.Bitmovin8AnalyticsStateMachine(a.stateMachineCallbacks,a.opts),a.register(),a.speedMeter=new m.Bitmovin8SpeedMeterAdapter(e,new h.DownloadSpeedMeter).getDownloadSpeedMeter(),a.segmentTracker=new A.Bitmovin8SegmentTrackerAdapter(e,new p.SegmentTracker).getSegmentTracker(),a}return a(e,t),Object.defineProperty(e.prototype,"drmPerformanceInfo",{get:function(){return this._drmPerformanceInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"downloadSpeedInfo",{get:function(){return this.speedMeter.getInfo()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segments",{get:function(){return this.segmentTracker.getSegments()},enumerable:!0,configurable:!0}),e.prototype.clearValues=function(){this.speedMeter.reset()},e.prototype.clearSegments=function(){this.segmentTracker.reset()},e.prototype.getAutoPlay=function(){return this.player.getConfig().playback&&this.player.getConfig().playback.autoplay||!1},e.prototype.getCurrentPlaybackInfo=function(){var e={},n=this.player.getSource();if(n){var a=l.getSourceInfoFromBitmovinSourceConfig(n.progressive,this.player);e.videoTitle=n.title,e.mpdUrl=n.dash,e.m3u8Url=n.hls,e.progUrl=a.progUrl,e.progBitrate=a.progBitrate}var r=s({},t.prototype.getCommonPlaybackInfo.call(this),{size:this.player.getViewMode()===i.Fullscreen?u.PlayerSize.Fullscreen:u.PlayerSize.Window,playerTech:this.getPlayerTech(),isLive:this.player.isLive(),videoDuration:this.player.getDuration(),streamFormat:this.player.getStreamType(),videoWindowWidth:this.player.getContainer().offsetWidth,videoWindowHeight:this.player.getContainer().offsetHeight,isMuted:this.player.isMuted(),isCasting:this.player.isCasting()},e),o=this.player.getPlaybackVideoData();r.videoBitrate=o.bitrate,r.videoPlaybackHeight=o.height,r.videoPlaybackWidth=o.width,"progressive"===r.streamFormat&&(r.videoBitrate=e.progBitrate);var E=this.player.getPlaybackAudioData();return r.audioBitrate=E.bitrate,r},e.prototype.register=function(){var t=this;this.player.on(this.player.exports.PlayerEvent.SourceUnloaded,function(e){t.segmentTracker.reset(),t.eventCallback(c.Event.SOURCE_UNLOADED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedVideoFrames()})}),this.player.on(this.player.exports.PlayerEvent.SourceLoaded,function(e){t.eventCallback(c.Event.SOURCE_LOADED,{})}),this.player.on(this.player.exports.PlayerEvent.CastStarted,function(e){t.eventCallback(c.Event.START_CAST,e)}),this.player.on(this.player.exports.PlayerEvent.CastStopped,function(){t.eventCallback(c.Event.END_CAST,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedVideoFrames()})}),this.player.on(this.player.exports.PlayerEvent.Play,function(e){"ui-seek"!==e.issuer&&t.eventCallback(c.Event.PLAY,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedVideoFrames()})}),this.player.on(this.player.exports.PlayerEvent.Playing,function(){t.eventCallback(c.Event.PLAYING,{currentTime:t.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.Paused,function(e){"ui-seek"!==e.issuer&&t.eventCallback(c.Event.PAUSE,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedVideoFrames()})}),this.player.on(this.player.exports.PlayerEvent.TimeChanged,function(){t.eventCallback(c.Event.TIMECHANGED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedVideoFrames()})}),this.player.on(this.player.exports.PlayerEvent.Seek,function(){t.eventCallback(c.Event.SEEK,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedVideoFrames()})}),this.player.on(this.player.exports.PlayerEvent.Seeked,function(){t.eventCallback(c.Event.SEEKED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedVideoFrames()})}),this.player.on(this.player.exports.PlayerEvent.StallStarted,function(){t.eventCallback(c.Event.START_BUFFERING,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedVideoFrames()})}),this.player.on(this.player.exports.PlayerEvent.StallEnded,function(){t.eventCallback(c.Event.END_BUFFERING,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedVideoFrames()})}),this.player.on(this.player.exports.PlayerEvent.AudioPlaybackQualityChanged,function(){var e=t.player.getPlaybackAudioData();t.eventCallback(c.Event.AUDIO_CHANGE,{bitrate:e.bitrate,currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedVideoFrames()})}),this.player.on(this.player.exports.PlayerEvent.VideoPlaybackQualityChanged,function(){var e=t.player.getPlaybackVideoData();t.eventCallback(c.Event.VIDEO_CHANGE,{width:e.width,height:e.height,bitrate:e.bitrate,currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedVideoFrames()})}),this.player.on(this.player.exports.PlayerEvent.ViewModeChanged,function(e){"fullscreen"===e.to?t.eventCallback(c.Event.START_FULLSCREEN,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedVideoFrames()}):"fullscreen"===e.from&&t.eventCallback(c.Event.END_FULLSCREEN,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedVideoFrames()})}),this.player.on(this.player.exports.PlayerEvent.AdStarted,function(e){t.eventCallback(c.Event.START_AD,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedVideoFrames()})}),this.player.on(this.player.exports.PlayerEvent.AdFinished,function(e){t.eventCallback(c.Event.END_AD,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedVideoFrames()})}),this.player.on(this.player.exports.PlayerEvent.Muted,function(){t.eventCallback(c.Event.MUTE,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedVideoFrames()})}),this.player.on(this.player.exports.PlayerEvent.Unmuted,function(){t.eventCallback(c.Event.UN_MUTE,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedVideoFrames()})}),this.player.on(this.player.exports.PlayerEvent.AdSkipped,function(e){t.eventCallback(c.Event.END_AD,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedVideoFrames()})}),this.player.on(this.player.exports.PlayerEvent.Error,function(e){t.eventCallback(c.Event.ERROR,{code:e.code,message:e.message,currentTime:t.player.getCurrentTime()})}),this.player.on(this.player.exports.PlayerEvent.PlaybackFinished,function(){t.eventCallback(c.Event.PLAYBACK_FINISHED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedVideoFrames()})}),this.player.on(this.player.exports.PlayerEvent.DownloadFinished,function(e){0===e.downloadType.indexOf("drm/license/")&&(t.drmPerformanceInfo.drmTime=1e3*e.downloadTime,t.drmPerformanceInfo.drmInfo=e.downloadType.replace("drm/license/",""),t.drmPerformanceInfo.drmUsed=!0)}),window.onunload=window.onbeforeunload=function(){t.onBeforeUnLoadEvent||(t.onBeforeUnLoadEvent=!0,t.eventCallback(c.Event.UNLOAD,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedVideoFrames()}))},this.player.on(this.player.exports.PlayerEvent.ModuleReady,function(e){"Advertising"===e.name&&t.hasAdSupport()&&t.optionalModuleReady(new d.Bitmovin8AdModule(t.player))})},e.prototype.sourceChange=function(t,e){this.stateMachine.sourceChange(t,e,this.player.getCurrentTime())},e.prototype.onError=function(){this.clearSegments()},e.prototype.hasAdSupport=function(){return this.player.ads&&void 0!==this.player.ads.getModuleInfo},e}(r.InternalAdapter);e.Bitmovin8InternalAdapter=f},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(5),i=n(0),r=n(4),o=n(37),E=function(t){function e(e,n){var a=t.call(this)||this,r=e.getConfig().analytics;return r?(a.internalAdapter=new o.Bitmovin8InternalAdapter(e,n),a.analytics=new s.Analytics(r,e,a.internalAdapter),e.analytics=a.analytics,a.wrapPlayerLoad(e,a.analytics),a):(i.logger.error("Bitmovin Analytics: No analytics config provided!"),a)}return a(e,t),e.prototype.wrapPlayerLoad=function(t,e){var n=t.load;t.load=function(){if(arguments.length>0){var a=arguments[0].analytics;e.sourceChange(a)}return n.apply(t,arguments)}},e}(r.Adapter);e.Bitmovin8Adapter=E},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(0),i=n(0),r=n(8),o=n(3);!function(t){t.SETUP="SETUP",t.STARTUP="STARTUP",t.READY="READY",t.PLAYING="PLAYING",t.REBUFFERING="REBUFFERING",t.PAUSE="PAUSE",t.QUALITYCHANGE="QUALITYCHANGE",t.PAUSED_SEEKING="PAUSED_SEEKING",t.QUALITYCHANGE_PAUSE="QUALITYCHANGE_PAUSE",t.QUALITYCHANGE_REBUFFERING="QUALITYCHANGE_REBUFFERING",t.END="END",t.ERROR="ERROR",t.MUTING_READY="MUTING_READY",t.MUTING_PLAY="MUTING_PLAY",t.MUTING_PAUSE="MUTING_PAUSE",t.CASTING="CASTING"}(a||(a={}));var E=function(){function t(t,e){var n=this;this.sourceChange=function(t,e,a){n.callEvent(o.Event.MANUAL_SOURCE_CHANGE,{config:t,currentTime:a},e)},this.stateMachineCallbacks=t,this.onEnterStateTimestamp=0,this.seekStartedAt=null,this.states=a,this.createStateMachine(e)}return t.prototype.getAllStates=function(){var t=this;return Object.keys(this.states).map(function(e){return t.states[e]}).concat(["FINISH_QUALITYCHANGE_PAUSE","FINISH_QUALITYCHANGE","FINISH_QUALITYCHANGE_REBUFFERING"])},t.prototype.createStateMachine=function(t){var e=this;this.stateMachine=r.create({initial:this.states.SETUP,error:function(t,e,n,a,i,r){s.logger.error("Error in statemachine: "+r)},events:[{name:o.Event.TIMECHANGED,from:this.states.SETUP,to:this.states.SETUP},{name:o.Event.READY,from:[this.states.SETUP,this.states.ERROR],to:this.states.READY},{name:o.Event.PLAY,from:this.states.READY,to:this.states.STARTUP},{name:o.Event.START_BUFFERING,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.END_BUFFERING,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.VIDEO_CHANGE,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.AUDIO_CHANGE,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.TIMECHANGED,from:this.states.STARTUP,to:this.states.PLAYING},{name:o.Event.TIMECHANGED,from:this.states.PLAYING,to:this.states.PLAYING},{name:o.Event.TIMECHANGED,from:this.states.PAUSE,to:this.states.PAUSE},{name:o.Event.TIMECHANGED,from:this.states.PAUSE,to:this.states.PAUSE},{name:o.Event.SEEKED,from:this.states.PAUSE,to:this.states.PAUSE},{name:o.Event.END_BUFFERING,from:this.states.PLAYING,to:this.states.PLAYING},{name:o.Event.START_BUFFERING,from:this.states.PLAYING,to:this.states.REBUFFERING},{name:o.Event.START_BUFFERING,from:this.states.REBUFFERING,to:this.states.REBUFFERING},{name:o.Event.PLAY,from:this.states.REBUFFERING,to:this.states.PLAYING},{name:o.Event.TIMECHANGED,from:this.states.REBUFFERING,to:this.states.PLAYING},{name:o.Event.SEEK,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.PLAY,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.PAUSE,from:this.states.PLAYING,to:this.states.PAUSE},{name:o.Event.PAUSE,from:this.states.REBUFFERING,to:this.states.PAUSE},{name:o.Event.PLAY,from:this.states.PAUSE,to:this.states.PLAYING},{name:o.Event.TIMECHANGED,from:this.states.PAUSE,to:this.states.PLAYING},{name:o.Event.VIDEO_CHANGE,from:this.states.PLAYING,to:this.states.QUALITYCHANGE},{name:o.Event.AUDIO_CHANGE,from:this.states.PLAYING,to:this.states.QUALITYCHANGE},{name:o.Event.VIDEO_CHANGE,from:this.states.QUALITYCHANGE,to:this.states.QUALITYCHANGE},{name:o.Event.AUDIO_CHANGE,from:this.states.QUALITYCHANGE,to:this.states.QUALITYCHANGE},{name:"FINISH_QUALITYCHANGE",from:this.states.QUALITYCHANGE,to:this.states.PLAYING},{name:o.Event.VIDEO_CHANGE,from:this.states.PAUSE,to:this.states.QUALITYCHANGE_PAUSE},{name:o.Event.AUDIO_CHANGE,from:this.states.PAUSE,to:this.states.QUALITYCHANGE_PAUSE},{name:o.Event.VIDEO_CHANGE,from:this.states.QUALITYCHANGE_PAUSE,to:this.states.QUALITYCHANGE_PAUSE},{name:o.Event.AUDIO_CHANGE,from:this.states.QUALITYCHANGE_PAUSE,to:this.states.QUALITYCHANGE_PAUSE},{name:"FINISH_QUALITYCHANGE_PAUSE",from:this.states.QUALITYCHANGE_PAUSE,to:this.states.PAUSE},{name:o.Event.SEEK,from:this.states.PAUSE,to:this.states.PAUSED_SEEKING},{name:o.Event.SEEK,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.AUDIO_CHANGE,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.VIDEO_CHANGE,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.START_BUFFERING,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.END_BUFFERING,from:this.states.PAUSED_SEEKING,to:this.states.PAUSED_SEEKING},{name:o.Event.SEEKED,from:this.states.PAUSED_SEEKING,to:this.states.PAUSE},{name:o.Event.TIMECHANGED,from:this.states.PAUSED_SEEKING,to:this.states.PLAYING},{name:o.Event.PAUSE,from:this.states.PAUSED_SEEKING,to:this.states.PAUSE},{name:o.Event.END,from:this.states.PAUSED_SEEKING,to:this.states.END},{name:o.Event.END,from:this.states.PLAYING,to:this.states.END},{name:o.Event.END,from:this.states.PAUSE,to:this.states.END},{name:o.Event.SEEK,from:this.states.END,to:this.states.END},{name:o.Event.SEEKED,from:this.states.END,to:this.states.END},{name:o.Event.TIMECHANGED,from:this.states.END,to:this.states.END},{name:o.Event.END_BUFFERING,from:this.states.END,to:this.states.END},{name:o.Event.START_BUFFERING,from:this.states.END,to:this.states.END},{name:o.Event.END,from:this.states.END,to:this.states.END},{name:o.Event.SEEKED,from:this.states.PLAYING,to:this.states.PLAYING},{name:o.Event.SEEK,from:this.states.PLAYING,to:this.states.PLAYING},{name:o.Event.PLAY,from:this.states.END,to:this.states.PLAYING},{name:o.Event.ERROR,from:this.getAllStates(),to:this.states.ERROR},{name:o.Event.PAUSE,from:this.states.ERROR,to:this.states.ERROR},{name:o.Event.UNLOAD,from:this.getAllStates(),to:this.states.END},{name:o.Event.START_AD,from:this.states.PLAYING,to:this.states.AD},{name:o.Event.END_AD,from:this.states.AD,to:this.states.PLAYING},{name:o.Event.MUTE,from:this.states.READY,to:this.states.MUTING_READY},{name:o.Event.UN_MUTE,from:this.states.READY,to:this.states.MUTING_READY},{name:"FINISH_MUTING",from:this.states.MUTING_READY,to:this.states.READY},{name:o.Event.MUTE,from:this.states.PLAYING,to:this.states.MUTING_PLAY},{name:o.Event.UN_MUTE,from:this.states.PLAYING,to:this.states.MUTING_PLAY},{name:"FINISH_MUTING",from:this.states.MUTING_PLAY,to:this.states.PLAYING},{name:o.Event.MUTE,from:this.states.PAUSE,to:this.states.MUTING_PAUSE},{name:o.Event.UN_MUTE,from:this.states.PAUSE,to:this.states.MUTING_PAUSE},{name:"FINISH_MUTING",from:this.states.MUTING_PAUSE,to:this.states.PAUSE},{name:o.Event.START_CAST,from:[this.states.READY,this.states.PAUSE],to:this.states.CASTING},{name:o.Event.PAUSE,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.PLAY,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.TIMECHANGED,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.MUTE,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.SEEK,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.SEEKED,from:this.states.CASTING,to:this.states.CASTING},{name:o.Event.END_CAST,from:this.states.CASTING,to:this.states.READY},{name:o.Event.SEEK,from:this.states.READY,to:this.states.READY},{name:o.Event.SEEKED,from:this.states.READY,to:this.states.READY},{name:o.Event.SEEKED,from:this.states.STARTUP,to:this.states.STARTUP},{name:o.Event.SOURCE_LOADED,from:this.getAllStates(),to:this.states.SETUP},{name:o.Event.MANUAL_SOURCE_CHANGE,from:this.getAllStates(),to:this.states.SOURCE_CHANGING},{name:o.Event.VIDEO_CHANGE,from:this.states.REBUFFERING,to:this.states.QUALITYCHANGE_REBUFFERING},{name:o.Event.AUDIO_CHANGE,from:this.states.REBUFFERING,to:this.states.QUALITYCHANGE_REBUFFERING},{name:o.Event.VIDEO_CHANGE,from:this.states.QUALITYCHANGE_REBUFFERING,to:this.states.QUALITYCHANGE_REBUFFERING},{name:o.Event.AUDIO_CHANGE,from:this.states.QUALITYCHANGE_REBUFFERING,to:this.states.QUALITYCHANGE_REBUFFERING},{name:"FINISH_QUALITYCHANGE_REBUFFERING",from:this.states.QUALITYCHANGE_REBUFFERING,to:this.states.REBUFFERING}],callbacks:{onenterstate:function(n,a,r,E,l){"none"===a&&t.starttime?e.onEnterStateTimestamp=t.starttime:e.onEnterStateTimestamp=E||(new Date).getTime(),s.logger.log("[ENTER] "+i.padRight(r,20)+"EVENT: "+i.padRight(n,20)+" from "+i.padRight(a,14)),l&&r!==e.states.PAUSED_SEEKING&&e.stateMachineCallbacks.setVideoTimeStartFromEvent(l),n===o.Event.START_CAST&&r===e.states.CASTING&&e.stateMachineCallbacks.startCasting(E,l)},onafterevent:function(t,n,a,s){a===e.states.QUALITYCHANGE&&e.stateMachine.FINISH_QUALITYCHANGE(s),a!==e.states.MUTING_READY&&a!==e.states.MUTING_PLAY&&a!==e.states.MUTING_PAUSE||e.stateMachine.FINISH_MUTING(s)},onleavestate:function(t,n,a,i,r){if(i){var E=i-e.onEnterStateTimestamp;r&&a!==e.states.PAUSED_SEEKING&&e.stateMachineCallbacks.setVideoTimeEndFromEvent(r);var l=String(n).toLowerCase();if(n===e.states.PAUSED_SEEKING){var c=i-e.seekStartedAt;e.seekStartedAt=null,e.stateMachineCallbacks[l](c,l,r)}else if(t===o.Event.UNLOAD&&n===e.states.PLAYING)e.stateMachineCallbacks.playingAndBye(E,l,r);else if(n===e.states.PAUSE&&a!==e.states.PAUSED_SEEKING)e.stateMachineCallbacks.setVideoTimeStartFromEvent(t),e.stateMachineCallbacks.pause(E,l,r);else{var u=e.stateMachineCallbacks[l];"function"==typeof u?u(E,l,r):s.logger.error("Could not find callback function for "+l)}r&&a!==e.states.PAUSED_SEEKING&&e.stateMachineCallbacks.setVideoTimeStartFromEvent(r),t===o.Event.VIDEO_CHANGE?e.stateMachineCallbacks.videoChange(r):t===o.Event.AUDIO_CHANGE?e.stateMachineCallbacks.audioChange(r):t===o.Event.MUTE?e.stateMachineCallbacks.mute():t===o.Event.UN_MUTE?e.stateMachineCallbacks.unMute():t===o.Event.MANUAL_SOURCE_CHANGE&&e.stateMachineCallbacks.manualSourceChange(r)}},onseek:function(t,n,a,s){e.seekStartedAt=e.seekStartedAt||s},ontimechanged:function(t,n,a,s,i){var r=s-e.onEnterStateTimestamp;r>59700&&(e.stateMachineCallbacks.setVideoTimeEndFromEvent(i),e.stateMachineCallbacks.heartbeat(r,String(n).toLowerCase(),i),e.onEnterStateTimestamp=s,e.stateMachineCallbacks.setVideoTimeStartFromEvent(i))},onplayerError:function(t,n,a,s,i){e.stateMachineCallbacks.error(i)},metadataLoaded:function(){e.updateMetadata()}}})},t.prototype.callEvent=function(t,e,n){var a=this.stateMachine[t];a?a.call(this.stateMachine,n,e):s.logger.log("Ignored Event: "+t)},t.prototype.updateMetadata=function(){this.stateMachineCallbacks.updateSample()},t}();e.HTML5AnalyticsStateMachine=E},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(10),i=n(2),r=n(6),o=function(t){function e(e,n){var a=t.call(this,null,n)||this;return a.hls=e,a.getPlayerName=function(){return i.Player.HLSJS},a.getPlayerVersion=function(){return a.hls.constructor.version},a.isLive=function(){var t=a.hls;if(t.currentLevel<0)return!1;var e=t.levels[t.currentLevel];return!!e&&e.details.live},a.resetMedia(),a.registerHlsEvents(),a}return a(e,t),e.prototype.getCurrentQualityLevelInfo=function(){if(!this.hls.levels)return null;var t=this.hls.levels[this.hls.currentLevel];return t?{bitrate:t.bitrate,width:t.width,height:t.height}:null},e.prototype.getMIMEType=function(){return r.MIMETypes.HLS},e.prototype.getStreamURL=function(){return this.hls.url},e.prototype.registerHlsEvents=function(){var t=this.hls;t.on(t.constructor.Events.MEDIA_ATTACHING,this.onMediaAttaching.bind(this)),t.on(t.constructor.Events.MEDIA_DETACHING,this.onMediaDetaching.bind(this)),t.on(t.constructor.Events.MANIFEST_LOADING,this.onManifestLoading.bind(this)),t.media&&(this.onMediaAttaching(),this.onManifestLoading())},e.prototype.onMediaAttaching=function(){this.mediaElement||(this.mediaElement=this.hls.media,this.registerMediaElement(),this.onMaybeReady())},e.prototype.onMediaDetaching=function(){this.unregisterMediaElement()},e.prototype.onManifestLoading=function(){this.onMaybeReady()},e}(s.HTML5InternalAdapter);e.HlsInternalAdapter=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=function(){return function(t,e){e&&(this.manifestDownloadTime=a.calculateTime(e.downloadTiming.downloadTime)),t&&(this.adReplaceContentDuration=a.calculateTimeWithUndefined(t.replaceContentDuration),this.adFallbackIndex=t.currentFallbackIndex);var n=t;n&&("pre"===n.position||"post"===n.position?this.adPosition=n.position:(this.adPosition="mid",this.adOffset=n.position),this.adPreloadOffset=a.calculateTimeWithUndefined(n.preloadOffset));var s=t;if(s&&(this.adTagType=s.tag?s.tag.type:void 0,this.adIsPersistent=s.persistent,this.adTagUrl=s.tag?s.tag.url:void 0,this.adTagUrl)){var i=a.getHostnameAndPathFromUrl(this.adTagUrl);this.adTagServer=i.hostname,this.adTagPath=i.path}var r=t;r&&(this.adScheduleTime=a.calculateTimeWithUndefined(r.scheduleTime),this.adIdPlayer=r.id)}}();e.AdBreakSample=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){return function(t){this.platform="web",t&&(this.videoImpressionId=t.impressionId,this.userAgent=t.userAgent,this.language=t.language,this.cdnProvider=t.cdnProvider,this.customData1=t.customData1,this.customData2=t.customData2,this.customData3=t.customData3,this.customData4=t.customData4,this.customData5=t.customData5,this.customUserId=t.customUserId,this.domain=t.domain,this.experimentName=t.experimentName,this.key=t.key,this.path=t.path,this.player=t.player,this.playerKey=t.playerKey,this.playerTech=t.playerTech,this.screenHeight=t.screenHeight,this.screenWidth=t.screenWidth,this.version=t.version,this.size=t.size,this.userId=t.userId,this.videoId=t.videoId,this.videoTitle=t.videoTitle,this.videoWindowHeight=t.videoWindowHeight,this.videoWindowWidth=t.videoWindowWidth)}}();e.AdAnalyticsSample=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=function(){function t(t,e,n){void 0===n&&(n=1);var s=this;this.inViewport=void 0,this.threshold=n,this.onIntersectionChanged=e,this.element=t;var i={root:null,rootMargin:"0px",threshold:n};this.observer=new IntersectionObserver(function(t,e){return s.handleIntersect(t,e)},i),this.observer.observe(t),this.hidden=a.getHiddenProp(),this.hidden&&(this.visibilityChange=this.hidden.replace("hidden","")+"visibilitychange",document.addEventListener(this.visibilityChange,this.handleVisibilityChange=this.handleVisibilityChange.bind(this),!1))}return t.prototype.isHidden=function(){return this.hidden&&document[this.hidden]},t.prototype.isInViewport=function(){return!this.isHidden()&&(this.inViewport||!0)},t.prototype.dispose=function(){this.observer.unobserve(this.element),this.observer.disconnect(),this.visibilityChange&&document.removeEventListener(this.visibilityChange,this.handleVisibilityChange,!1)},t.prototype.handleVisibilityChange=function(){this.onIntersectionChanged()},t.prototype.handleIntersect=function(t,e){var n=this;t.forEach(function(t){t.target===n.element&&(n.inViewport=!(t.intersectionRatio<n.threshold))}),this.onIntersectionChanged()},t}();e.ViewportTracker=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=function(){function t(e){if(this.clicked=0,this.closed=0,this.completed=0,this.midpoint=0,this.quartile1=0,this.quartile3=0,this.skipped=0,this.started=0,e){this.adClickthroughUrl=e.clickThroughUrl,this.adId=e.id,this.mediaUrl=e.mediaFileUrl;var n=a.getHostnameAndPathFromUrl(this.mediaUrl||"");this.mediaPath=n.path,this.mediaServer=n.hostname,this.isLinear=e.isLinear}var s=e;s&&(this.adSkippableAfter=t.parseSkipAfter(s.skippableAfter),this.adSkippable=s.skippable||(void 0===this.adSkippableAfter?void 0:this.adSkippableAfter>=0),this.adDuration=a.calculateTime(s.duration))}return t.parseSkipAfter=function(t){if(void 0!==t)return-1===t?t:a.calculateTime(t)},t}();e.AdSample=s},function(t,e,n){"use strict";var a=this&&this.__assign||Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t};Object.defineProperty(e,"__esModule",{value:!0});var s,i=n(44),r=n(1),o=n(43),E=n(42),l=n(41);!function(t){t.FIRST_QUARTILE="firstQuartile",t.MIDPOINT="midpoint",t.THIRD_QUARTILE="thirdQuartile"}(s||(s={}));var c=function(){function t(t,e){var n=this;this.onBeforeUnLoadEvent=!1,this.adManifestLoadedEvents=[],this.isPlaying=!1,this.adPodPosition=0,this.analytics=t,this.adapter=e,this.adapter.adCallbacks.onAdStarted=function(t){return n.onAdStarted(t)},this.adapter.adCallbacks.onAdFinished=function(t){return n.onAdFinished(t)},this.adapter.adCallbacks.onAdBreakStarted=function(t){return n.onAdBreakStarted(t)},this.adapter.adCallbacks.onAdBreakFinished=function(t){return n.onAdBreakFinished(t)},this.adapter.adCallbacks.onAdClicked=function(t){return n.onAdClicked(t)},this.adapter.adCallbacks.onAdError=function(t){return n.onAdError(t)},this.adapter.adCallbacks.onAdManifestLoaded=function(t){return n.onAdManifestLoaded(t)},this.adapter.adCallbacks.onPlay=function(){return n.onPlay()},this.adapter.adCallbacks.onPause=function(){return n.onPause()},this.adapter.adCallbacks.onBeforeUnload=function(){return n.onBeforeUnload()},this.adapter.adCallbacks.onAdSkipped=function(t){return n.onAdSkipped(t)},this.adapter.adCallbacks.onAdQuartile=function(t){return n.onAdQuartile(t)},this.viewportTracker=new o.ViewportTracker(this.adapter.getContainer(),function(){return n.onIntersectionChanged()},.5)}return t.prototype.onIntersectionChanged=function(){this.activeAdSample&&(this.isContainerInViewport()?this.enterViewportTimestamp=r.getCurrentTimestamp():this.enterViewportTimestamp&&(this.activeAdSample.timeInViewport=(this.activeAdSample.timeInViewport||0)+r.getCurrentTimestamp()-this.enterViewportTimestamp))},t.prototype.isContainerInViewport=function(){return!this.viewportTracker||this.viewportTracker.isInViewport()},t.prototype.onPlay=function(){this.adapter&&this.adapter.isLinearAdActive()&&this.activeAdSample&&(this.beginPlayingTimestamp=r.getCurrentTimestamp(),this.enterViewportTimestamp=r.getCurrentTimestamp(),this.isPlaying=!0)},t.prototype.onPause=function(){this.adapter&&this.adapter.isLinearAdActive()&&this.activeAdSample&&(this.updatePlayingTime(this.activeAdSample),this.isPlaying=!1)},t.prototype.onAdManifestLoaded=function(t){var e=t.adConfig;e&&e.tag&&"vmap"===e.tag.type?this.sendAnalyticsRequest(new l.AdBreakSample(t.adConfig,t)):t.adBreak&&this.adManifestLoadedEvents.push(t)},t.prototype.onAdBreakStarted=function(t){this.adPodPosition=0,this.activeAdBreakSample=new l.AdBreakSample(t.adBreak,this.getAdManifestLoadedEvent(t.adBreak)),this.adStartupTimestamp=r.getCurrentTimestamp()},t.prototype.onAdBreakFinished=function(t){this.resetActiveAd(),this.activeAdBreakSample=void 0},t.prototype.onAdStarted=function(t){t.ad.isLinear&&(this.resetActiveAd(),this.activeAdSample=new i.AdSample(t.ad),this.currentTime=void 0,this.activeAdSample.adStartupTime=this.adStartupTimestamp?r.getCurrentTimestamp()-this.adStartupTimestamp:void 0,this.startAd(this.activeAdSample))},t.prototype.onAdFinished=function(t){if(this.activeAdBreakSample&&this.activeAdSample){var e=a({},this.activeAdSample);e.completed=1,this.resetActiveAd(),this.completeAd(this.activeAdBreakSample,e,e.adDuration)}},t.prototype.onAdSkipped=function(t){if(this.activeAdBreakSample&&this.activeAdSample){var e=a({},this.activeAdSample);e.skipped=1,e.skipPosition=this.currentTime,e.skipPercentage=r.calculatePercentage(this.activeAdSample.skipPosition,this.activeAdSample.adDuration),this.resetActiveAd(),this.completeAd(this.activeAdBreakSample,e,e.skipPosition)}},t.prototype.onAdError=function(t){var e,n,a=this,s=t.data?t.data:t,i=s.code,o=s.message,E=s.adConfig,c=s.adBreak,u=new l.AdBreakSample(c||E,c?this.getAdManifestLoadedEvent(c):void 0);u.errorCode=i,u.errorMessage=o,this.activeAdSample&&c&&c.ads&&c.ads.includes(function(t){return t.id===a.activeAdSample.adId})&&(n=(e=this.activeAdSample).errorPosition=this.currentTime,e.errorPercentage=r.calculatePercentage(e.errorPosition,e.adDuration)),this.completeAd(u,e,n)},t.prototype.onAdLinearityChanged=function(t){},t.prototype.onAdClicked=function(t){this.activeAdSample&&(this.activeAdSample.adClickthroughUrl=t.clickThroughUrl,this.activeAdSample.clicked=1,this.activeAdSample.clickPosition=this.currentTime,this.activeAdSample.clickPercentage=r.calculatePercentage(this.activeAdSample.clickPosition,this.activeAdSample.adDuration))},t.prototype.onAdQuartile=function(t){this.activeAdSample&&(t.quartile===s.FIRST_QUARTILE?this.activeAdSample.quartile1=1:t.quartile===s.MIDPOINT?this.activeAdSample.midpoint=1:t.quartile===s.THIRD_QUARTILE&&(this.activeAdSample.quartile3=1))},t.prototype.onBeforeUnload=function(){if(!this.onBeforeUnLoadEvent&&(this.onBeforeUnLoadEvent=!0,this.activeAdSample&&this.activeAdBreakSample)){var t=a({},this.activeAdSample);t.closed=1,t.closePosition=this.currentTime,t.closePercentage=r.calculatePercentage(t.closePosition,t.adDuration),this.resetActiveAd(),this.completeAd(this.activeAdBreakSample,t,t.closePosition)}},t.prototype.createNewAdAnalyticsSample=function(t){var e=this.adapter.getAdModuleInfo();return a({},new E.AdAnalyticsSample(t),{analyticsVersion:"v2.2.0-beta3",adModule:e.name,adModuleVersion:e.version,playerStartupTime:this.analytics.playerStartupTime,pageLoadTime:this.analytics.pageLoadTime,autoplay:this.analytics.autoplay,pageLoadType:r.getPageLoadType()})},t.prototype.getAdManifestLoadedEvent=function(t){return this.adManifestLoadedEvents.find(function(e){return e.adBreak===t})},t.prototype.sendAnalyticsRequest=function(t,e){var n=a({},this.createNewAdAnalyticsSample(this.analytics.sample),t,e||new i.AdSample);n.time=r.getCurrentTimestamp(),n.adImpressionId=r.generateUUID(),n.percentageInViewport=r.calculatePercentage(n.timeInViewport,n.timePlayed),this.analytics.backend.sendAdRequest(n)},t.prototype.updatePlayingTime=function(t){this.beginPlayingTimestamp&&this.isPlaying&&(void 0!==t.timePlayed&&(t.timePlayed+=r.getCurrentTimestamp()-this.beginPlayingTimestamp),this.isContainerInViewport()&&this.enterViewportTimestamp&&void 0!==t.timeInViewport&&(t.timeInViewport+=r.getCurrentTimestamp()-this.enterViewportTimestamp))},t.prototype.startAd=function(e){var n=this;e.started=1,e.timePlayed=0,e.timeInViewport=0,e.adPodPosition=this.adPodPosition,this.beginPlayingTimestamp=r.getCurrentTimestamp(),this.enterViewportTimestamp=r.getCurrentTimestamp(),this.isPlaying=!0,this.currentTime=0,this.adPodPosition++,this.currentTimeInterval=setInterval(function(){e&&void 0!==e.adDuration&&e.adDuration>0&&n.adapter.isLinearAdActive()&&(n.currentTime=r.calculateTime(Math.max(n.adapter.currentTime(),0)))},t.TIMEOUT_CURRENT_TIME_INTERVAL)},t.prototype.completeAd=function(t,e,n){void 0===e&&(e=new i.AdSample),e.exitPosition=n,e.playPercentage=r.calculatePercentage(e.exitPosition,e.adDuration),this.adStartupTimestamp=r.getCurrentTimestamp(),this.updatePlayingTime(e),this.isPlaying=!1,this.sendAnalyticsRequest(t,e)},t.prototype.resetActiveAd=function(){clearInterval(this.currentTimeInterval),this.currentTime=void 0,this.activeAdSample=void 0},t.MODULE_NAME="ads",t.TIMEOUT_CURRENT_TIME_INTERVAL=100,t}();e.AdAnalytics=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(14),s=n(1);e.LicenseCall=function(t,e,n,i){var r=s.joinUrls(i,"/licensing"),o={analyticsVersion:n,domain:e,key:t};return new Promise(function(t){a.post(r,o,function(e){t(e)})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MESSAGE_NAMESPACE="urn:x-cast:com.bitmovin.analytics.cast",e.ANALYTICS_BACKEND_BASE_URL="https://analytics-ingress-global.bitmovin.com"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t){this.sequenceNumber=0,this.underlying=t}return t.prototype.sendRequest=function(t){this.updateSampleBeforeSending(t),this.underlying.sendRequest(t)},t.prototype.sendUnloadRequest=function(t){this.updateSampleBeforeSending(t),this.underlying.sendUnloadRequest(t)},t.prototype.sendRequestSynchronous=function(t){this.updateSampleBeforeSending(t),this.underlying.sendRequestSynchronous(t)},t.prototype.sendAdRequest=function(t){this.underlying.sendAdRequest(t)},t.prototype.updateSampleBeforeSending=function(t){t.sequenceNumber=this.sequenceNumber++},t}();e.SequenceNumberBackend=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){this.underlying=e,t.debug&&t.debug.fields&&(this.debugFields=t.debug.fields)}return t.prototype.sendRequest=function(t){this.printFields(t),this.underlying.sendRequest(t)},t.prototype.sendUnloadRequest=function(t){this.printFields(t),this.underlying.sendUnloadRequest(t)},t.prototype.sendRequestSynchronous=function(t){this.printFields(t),this.underlying.sendRequestSynchronous(t)},t.prototype.sendAdRequest=function(t){this.underlying.sendAdRequest(t)},t.prototype.printFields=function(t){if(this.debugFields&&this.debugFields.length){var e={};this.debugFields.forEach(function(n){return e[n]=t[n]}),console.table([e])}},t}();e.DebuggingBackend=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(){}return t.prototype.sendRequest=function(t){},t.prototype.sendUnloadRequest=function(t){},t.prototype.sendRequestSynchronous=function(t){},t.prototype.sendAdRequest=function(t){},t}();e.NoOpBackend=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(14),s=n(1),i=function(){function t(t){this.analyticsServerUrl=s.joinUrls(t,"analytics"),this.adAnalyticsServerUrl=s.joinUrls(t,"analytics/a")}return t.prototype.sendRequest=function(t,e){a.post(this.analyticsServerUrl,t,e)},t.prototype.sendRequestSynchronous=function(t,e){a.post(this.analyticsServerUrl,t,e,!1)},t.prototype.sendAdRequest=function(t,e){a.post(this.adAnalyticsServerUrl,t,e)},t.prototype.getAnalyticsServerUrl=function(){return this.analyticsServerUrl},t.prototype.getAdAnalyticsServerUrl=function(){return this.adAnalyticsServerUrl},t}();e.AnalyticsCall=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(51),s=n(1),i=function(){function t(t,e){this.hasAdModule=t,this.analyticsCall=new a.AnalyticsCall(e)}return t.prototype.sendRequest=function(t){this.analyticsCall.sendRequest(t,s.noOp)},t.prototype.sendUnloadRequest=function(t){void 0===navigator.sendBeacon?this.sendRequestSynchronous(t):navigator.sendBeacon(this.analyticsCall.getAnalyticsServerUrl(),JSON.stringify(t))||this.sendRequestSynchronous(t)},t.prototype.sendRequestSynchronous=function(t){this.analyticsCall.sendRequestSynchronous(t,s.noOp)},t.prototype.sendAdRequest=function(t){this.hasAdModule&&(void 0===navigator.sendBeacon?this.analyticsCall.sendAdRequest(t,s.noOp):navigator.sendBeacon(this.analyticsCall.getAdAnalyticsServerUrl(),JSON.stringify(t))||this.analyticsCall.sendAdRequest(t,s.noOp))},t}();e.RemoteBackend=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(){this.queue=[],this.unloadQueue=[],this.syncQueue=[],this.adQueue=[]}return t.prototype.sendRequest=function(t){this.queue.push(t)},t.prototype.sendUnloadRequest=function(t){this.unloadQueue.push(t)},t.prototype.sendRequestSynchronous=function(t){this.syncQueue.push(t)},t.prototype.sendAdRequest=function(t){this.adQueue.push(t)},t.prototype.flushTo=function(t){this.queue.forEach(function(e){t.sendRequest(e)}),this.unloadQueue.forEach(function(e){t.sendUnloadRequest(e)}),this.syncQueue.forEach(function(e){t.sendRequestSynchronous(e)}),this.adQueue.forEach(function(e){t.sendAdRequest(e)})},t}();e.QueueBackend=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.Granted="granted",t.Denied="denied",t.Skip="skip"}(e.LicensingResult||(e.LicensingResult={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(54),s=n(53),i=n(52),r=n(0),o=n(50),E=function(){function t(t,e,n){this.backend=new s.QueueBackend,this.licenseCall=e,this.promise=this.performLicenseCheck(t.key,t.domain,t.version,n)}return t.prototype.performLicenseCheck=function(t,e,n,s){var E=this;return this.licenseCall(t,e,n,s).then(function(t){if(t.status!==a.LicensingResult.Granted)throw new Error(t.message);var e=new i.RemoteBackend(!0,s);return E.backend.flushTo(e),E.backend=e,t}).catch(function(t){return r.logger.errorMessageToUser("License Check for Bitmovin Analytics failed because of ",t),E.backend=new o.NoOpBackend,t})},t.prototype.sendRequest=function(t){this.backend.sendRequest(t)},t.prototype.sendUnloadRequest=function(t){this.backend.sendUnloadRequest(t)},t.prototype.sendRequestSynchronous=function(t){this.backend.sendRequestSynchronous(t)},t.prototype.sendAdRequest=function(t){this.backend.sendAdRequest(t)},t}();e.LicenseCheckingBackend=E},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(55),s=n(49),i=n(48),r=n(47),o=n(46),E=function(){function t(){}return t.createBackend=function(t,e){var n=t.config&&t.config.backendUrl||r.ANALYTICS_BACKEND_BASE_URL,E=new i.SequenceNumberBackend(new a.LicenseCheckingBackend(e,o.LicenseCall,n));return t.debug?new s.DebuggingBackend(t,E):E},t}();e.BackendFactory=E},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.FOREGROUND=1]="FOREGROUND",t[t.BACKGROUND=2]="BACKGROUND"}(e.PAGE_LOAD_TYPE||(e.PAGE_LOAD_TYPE={}))},function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(5),i=n(4),r=n(40),o=function(t){function e(e,n,a){var i=t.call(this)||this;return i.internalAdapter=new r.HlsInternalAdapter(n,a),i.analytics=new s.Analytics(e,n,i.internalAdapter),i}return a(e,t),e}(i.Adapter);e.HlsAdapter=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.CLOUDFLARE="cloudflare",t.AKAMAI="akamai",t.FASTLY="fastly",t.MAXCDN="maxcdn",t.CLOUDFRONT="cloudfront",t.CHINACACHE="chinacache",t.BITGRAVITY="bitgravity"}(e.CdnProvider||(e.CdnProvider={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(2);e.Players=a.Player;var s=n(59);e.CdnProviders=s.CdnProvider;var i=n(15);e.version=i.VERSION;var r=n(58);e.HlsAdapter=r.HlsAdapter;var o=n(38);e.Bitmovin8Adapter=o.Bitmovin8Adapter;var E=n(27);e.Bitmovin7Adapter=E.Bitmovin7Adapter;var l=n(24);e.VideojsAdapter=l.VideojsAdapter;var c=n(21);e.ShakaAdapter=c.ShakaAdapter;var u=n(19);e.DashjsAdapter=u.DashjsAdapter;var d=n(17);e.HTMLVideoElementAdapter=d.HTMLVideoElementAdapter;var h={name:"analytics",module:{Analytics:o.Bitmovin8Adapter},hooks:{setup:function(t,e){var n=new(0,t.Analytics)(e);return Promise.resolve(n)}}};e.PlayerModule=h;var m={HlsAdapter:r.HlsAdapter,Bitmovin8Adapter:o.Bitmovin8Adapter,Bitmovin7Adapter:E.Bitmovin7Adapter,VideojsAdapter:l.VideojsAdapter,ShakaAdapter:c.ShakaAdapter,DashjsAdapter:u.DashjsAdapter,HTMLVideoElementAdapter:d.HTMLVideoElementAdapter};e.adapters=m,e.default={PlayerModule:h}}])});
//# sourceMappingURL=bitmovinanalytics.min.js.map